<div class="container-fluid" id="show_center_product_page_container">

    <div class="wrapper d-none">
        <h1 class="title-medium"></h1>
    </div>

    <div class="alert alert-info mt-3 mb-2" style="display:none;" id="ERROR_BOX">
        <img src="assets/img/utils/info.png" class="alert-icon" alt="">
        <div class="alert-text" id="text"></div>
    </div>

    <div class="mt-5">

        <div class="row gy-3 mb-5">

            <div class="col-lg-6 col-md-6">

                <div class="bg-color-22 px-3 py-3 border-radius-15 max-width-340px mb-4">

                    <div class="d-flex align-items-center mb-3">
                        
                        <div class="dropdown">
                            <div class="bg-white d-inline-flex justify-content-center align-items-center border-radius-10 cursor-pointer text-color-10 px-2 py-1" type="button" id="product_card_more_actions_menu" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-ellipsis-h"></i>
                            </div>
        
                            <ul class="dropdown-menu" id="product_card_more_actions__menu" aria-labelledby="product_card_more_actions_menu">
                                <li data-perm="update_product">
                                    <a class="dropdown-item fs-14" href="#" data-role="UPDATE" >
                                        <%= UI_DISPLAY_LANG.views.pages.global.edit_info %>
                                    </a>
                                </li>
                            </ul>
                        </div>
        
                    </div>
        
                    <div class="d-flex">
        
                        <div class="flex-grow-1">
                            <div class="mb-2">
                                <div class="fs-14 text-color-17"><%= UI_DISPLAY_LANG.views.pages.global.text73 %> :</div>
                            </div>
        
                            <div class="fs-17 fw-500" id="productName_element">عبد النور عدواني</div>
                        </div>
        
                        <div class="flex-grow-1 has-text-centered">
                            <img src="" id="productAvatar_element" data-placeholder="../assets/img/utils/placeholder.jpg" class="width-50px height-50px rounded-circle js_image_src_placeholder" alt="">
                        </div>
        
                    </div>
        
                </div>

            </div>

            <div class="col-lg-6 col-md-6">

                <div class="mb-4 tabbed-list-1 d-flex js_list_tabs_navs" id="profile_list_tabs_navs">

                    <div class="border-radius-15 px-4 py-3 mx-3 has-text-centered list-item cursor-pointer bg-color-hover-23a1dd active js_list_tab_nav"  data-target="#personal_details_tab" >
    
                        <div class="no-pointer">
                            <div class="mb-3">
                                <div class="width-50px height-50px rounded-circle d-inline-flex justify-content-center align-items-center list-item-icon fs-30">
                                    <i class="fas fa-info"></i>
                                </div>
                            </div>
        
                            <div class="fs-14">
                                <%= UI_DISPLAY_LANG.views.pages.global.tabs.tab24 %>
                            </div>
                        </div>
    
                    </div>
    
                    <div class="d-none border-radius-15 px-4 py-3 mx-3 has-text-centered list-item cursor-pointer bg-color-hover-23a1dd js_list_tab_nav"  data-target="#contact_details_tab" >
    
                        <div class="no-pointer">
                            <div class="mb-3">
                                <div class="width-50px height-50px rounded-circle d-inline-flex justify-content-center align-items-center list-item-icon fs-30">
                                    <i class="fas fa-address-book"></i>
                                </div>
                            </div>
        
                            <div class="fs-14">
                                <%= UI_DISPLAY_LANG.views.pages.global.tabs.tab2 %>
                            </div>
                        </div>
    
                    </div>
    
                </div>

            </div>

        </div>

        <div class="row gy-3">

            <div class="col-md-12">

                <div class="row gy-3">

                    <div class="col-md-12" id="personal_details_tab" data-role="tab_content">

                        <div class="border rounded px-4 py-5">

                            <h4 class="h4 mb-4"><%= UI_DISPLAY_LANG.views.pages.global.text100 %></h4>

                            <div class="row">

                                <div class="col-md-4">

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label38 %>: </label>
                                        <span class="" id="personal_details_tab__productCode_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label132 %>: </label>
                                        <span class="" id="personal_details_tab__productBarcode_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label1 %>: </label>
                                        <span class="" id="personal_details_tab__productName_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label89 %>: </label>
                                        <span class="" id="personal_details_tab__productDesc_element"></span>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label40 %>: </label>
                                        <span class="" id="personal_details_tab__productBuyPrice_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label41 %>: </label>
                                        <span class="" id="personal_details_tab__productPrice_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label44 %>: </label>
                                        <span class="" id="personal_details_tab__productWholesalePrice_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label45 %>: </label>
                                        <span class="" id="personal_details_tab__productHalfWholesalePrice_element"></span>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label116 %>: </label>
                                        <span class="" id="personal_details_tab__productQuantity_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label94 %>: </label>
                                        <span class="" id="personal_details_tab__low_stock_threshold_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label124 %>: </label>
                                        <span class="" id="personal_details_tab__average_low_stock_threshold_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label127 %>: </label>
                                        <span class="" id="personal_details_tab__package_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label128 %>: </label>
                                        <span class="" id="personal_details_tab__units_in_package_element"></span>
                                    </div>

                                </div>

                                <div class="col-md-4">

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label46 %>: </label>
                                        <span class="" id="personal_details_tab__category_name_element"></span>
                                    </div>

                                    <div class="mb-2">
                                        <label for="" class="fw-700 fs-17 text-color-12"><%= UI_DISPLAY_LANG.views.pages.global.label119 %>: </label>
                                        <span class="" id="personal_details_tab__family_name_element"></span>
                                    </div>

                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

            <div class="col-md-12" data-perm="view_product_related_invoices">

                <a class="pb-4 d-inline-block fs-17 js_panel_toggler_button" href="#" data-target="#product_related_invoices_panel" >
                    <%= UI_DISPLAY_LANG.views.pages.global.show_all_related_invoices %>
                </a>

                <div class="border rounded px-4 py-5 d-none" id="product_related_invoices_panel">

                    <div class="has-text-aligned-locale-inverted">
                        <div class="close-button-sm js_panel_close_button" data-target="#product_related_invoices_panel">
                            <i class="xfb xfb-close-sm-thin"></i>
                        </div>
                    </div>

                    <h4 class="h4 mb-3">
                        <%= UI_DISPLAY_LANG.views.pages.global.navs.nav157 %>
                    </h4>

                    <div class="py-4 px-3 mb-3 border rounded">
                        <div class="row gx-4 gy-3 mb-2">
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`,
                                    { searchBtnId: 'product_related_invoices_search_btn' ,
                                    searchInputId: 'product_related_invoices_search_input' , }) -%>
                            </div>
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`,
                                    { dateStartId: 'product_related_invoices_date_start_input' ,
                                    dateEndId: 'product_related_invoices_date_end_input' ,
                                    dataIgnoreDefaultValue: true, }) -%>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-lg-3 col-md-4">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/select-order-directions.template.ejs`,
                                    { 
                                        componentId: 'product_related_invoices_select_order_directions_component' ,
                                        selectId: 'product_related_invoices_order_direction_select',
                                    }) 
                                -%>
                            </div>

                        </div>
                    </div>

                    <div id="product_related_invoices_pagination" class="flex flex-center my-3"></div>

                    <div class="table-div bg-white border rounded">

                        <table class="table-01 js_invoice_table"
                            id="product_related_invoices_tableElement">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th01 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th02 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th04 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th32 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th76 %>
                                    </th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <!--
                                <tr class="expand-row">
                                    <td>
                                        <input type="checkbox" class="form-check-input" data-role="CHECK" data-orderid="">
                                    </td>
                                    <td> HG38020496 </td>
                                    <td> 2022-06-17 </td>
                                    <td> - </td>
                                    <td> $11.99 </td>
                                    <td style="width:20px">
                                        <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                                    </td>
                                </tr>
                                <tr class="expand-row__row" style="display:none;">
                                    <td colspan="10">
                                        <table class="table-01">
                                            <thead>
                                                <tr>
                                                    <th>Product</th>
                                                    <th>Quantity</th>
                                                    <th>Unit Price</th>
                                                    <th>Dept (DA)</th>
                                                    <th>Dept (%)</th>
                                                    <th>Total Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <td>Renew Premium Web Hosting (crstra-saffromfood.com)</td>
                                                <td>3</td>
                                                <td>1880.00</td>
                                                <td>880.00</td>
                                                <td>32.12%</td>
                                                <td>1880.00</td>
                                            </tbody>
                                        </table>
                                        <div class="order-price-table">
                                            <div class="order-price-table-contents">
                                                <div>
                                                    <strong>product price</strong>
                                                    <span>11.25$</span>
                                                </div>
                                                <div>
                                                    <strong>dept (%)</strong>
                                                    <span>0.00%</span>
                                                </div>
                                                <div>
                                                    <strong>sell price</strong>
                                                    <span>11.25</span>
                                                </div>
                                                <div class="border-top my-1"></div>
                                                <div>
                                                    <strong>total</strong>
                                                    <span>11.25</span>
                                                </div>	
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                -->
                            </tbody>
                        </table>

                    </div>

                </div>

            </div>

            <div class="col-md-12" data-perm="view_product_center_to_center_transfer_sent_invoices">

                <a class="pb-4 d-inline-block fs-17 js_panel_toggler_button" href="#" data-target="#product_center_to_center_transfer_sent_invoices_panel" >
                    <%= UI_DISPLAY_LANG.views.pages.global.show_transfer_sent_invoices %>
                </a>

                <div class="border rounded px-4 py-5 d-none" id="product_center_to_center_transfer_sent_invoices_panel">

                    <div class="has-text-aligned-locale-inverted">
                        <div class="close-button-sm js_panel_close_button" data-target="#product_center_to_center_transfer_sent_invoices_panel">
                            <i class="xfb xfb-close-sm-thin"></i>
                        </div>
                    </div>

                    <h4 class="h4 mb-3">
                        <%= UI_DISPLAY_LANG.views.pages.global.navs.nav126 %>
                    </h4>

                    <div class="py-4 px-3 mb-3 border rounded">
                        <div class="row gx-4 gy-3">
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`,
                                    { searchBtnId: 'product_center_to_center_transfer_sent_invoices_search_btn' ,
                                    searchInputId: 'product_center_to_center_transfer_sent_invoices_search_input' , }) -%>
                            </div>
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`,
                                    { dateStartId: 'product_center_to_center_transfer_sent_invoices_date_start_input' ,
                                    dateEndId: 'product_center_to_center_transfer_sent_invoices_date_end_input' ,
                                    dataIgnoreDefaultValue: true, }) -%>
                            </div>
                        </div>
                    </div>

                    <div id="product_center_to_center_transfer_sent_invoices_pagination" class="flex flex-center my-3"></div>

                    <div class="table-div bg-white border rounded">

                        <table class="table-01 js_invoice_table"
                            id="product_center_to_center_transfer_sent_invoices_tableElement">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th01 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th02 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th04 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th32 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th76 %>
                                    </th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <!--
                                <tr class="expand-row">
                                    <td>
                                        <input type="checkbox" class="form-check-input" data-role="CHECK" data-orderid="">
                                    </td>
                                    <td> HG38020496 </td>
                                    <td> 2022-06-17 </td>
                                    <td> - </td>
                                    <td> $11.99 </td>
                                    <td style="width:20px">
                                        <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                                    </td>
                                </tr>
                                <tr class="expand-row__row" style="display:none;">
                                    <td colspan="10">
                                        <table class="table-01">
                                            <thead>
                                                <tr>
                                                    <th>Product</th>
                                                    <th>Quantity</th>
                                                    <th>Unit Price</th>
                                                    <th>Dept (DA)</th>
                                                    <th>Dept (%)</th>
                                                    <th>Total Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <td>Renew Premium Web Hosting (crstra-saffromfood.com)</td>
                                                <td>3</td>
                                                <td>1880.00</td>
                                                <td>880.00</td>
                                                <td>32.12%</td>
                                                <td>1880.00</td>
                                            </tbody>
                                        </table>
                                        <div class="order-price-table">
                                            <div class="order-price-table-contents">
                                                <div>
                                                    <strong>product price</strong>
                                                    <span>11.25$</span>
                                                </div>
                                                <div>
                                                    <strong>dept (%)</strong>
                                                    <span>0.00%</span>
                                                </div>
                                                <div>
                                                    <strong>sell price</strong>
                                                    <span>11.25</span>
                                                </div>
                                                <div class="border-top my-1"></div>
                                                <div>
                                                    <strong>total</strong>
                                                    <span>11.25</span>
                                                </div>	
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                -->
                            </tbody>
                        </table>

                    </div>

                </div>

            </div>

            <div class="col-md-12" data-perm="view_product_center_to_center_transfer_received_invoices">

                <a class="pb-4 d-inline-block fs-17 js_panel_toggler_button" href="#" data-target="#product_center_to_center_transfer_received_invoices_panel" >
                    <%= UI_DISPLAY_LANG.views.pages.global.show_transfer_received_invoices %>
                </a>

                <div class="border rounded px-4 py-5 d-none" id="product_center_to_center_transfer_received_invoices_panel">

                    <div class="has-text-aligned-locale-inverted">
                        <div class="close-button-sm js_panel_close_button" data-target="#product_center_to_center_transfer_received_invoices_panel">
                            <i class="xfb xfb-close-sm-thin"></i>
                        </div>
                    </div>

                    <h4 class="h4 mb-3">
                        <%= UI_DISPLAY_LANG.views.pages.global.navs.nav127 %>
                    </h4>

                    <div class="py-4 px-3 mb-3 border rounded">
                        <div class="row gx-4 gy-3">
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`,
                                    { searchBtnId: 'product_center_to_center_transfer_received_invoices_search_btn' ,
                                    searchInputId: 'product_center_to_center_transfer_received_invoices_search_input' , }) -%>
                            </div>
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`,
                                    { dateStartId: 'product_center_to_center_transfer_received_invoices_date_start_input' ,
                                    dateEndId: 'product_center_to_center_transfer_received_invoices_date_end_input' ,
                                    dataIgnoreDefaultValue: true, }) -%>
                            </div>
                        </div>
                    </div>

                    <div id="product_center_to_center_transfer_received_invoices_pagination" class="flex flex-center my-3"></div>

                    <div class="table-div bg-white border rounded">

                        <table class="table-01 js_invoice_table"
                            id="product_center_to_center_transfer_received_invoices_tableElement">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th01 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th02 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th04 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th32 %>
                                    </th>
                                    <th>
                                        <%= UI_DISPLAY_LANG.views.pages.global.th76 %>
                                    </th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <!--
                                <tr class="expand-row">
                                    <td>
                                        <input type="checkbox" class="form-check-input" data-role="CHECK" data-orderid="">
                                    </td>
                                    <td> HG38020496 </td>
                                    <td> 2022-06-17 </td>
                                    <td> - </td>
                                    <td> $11.99 </td>
                                    <td style="width:20px">
                                        <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                                    </td>
                                </tr>
                                <tr class="expand-row__row" style="display:none;">
                                    <td colspan="10">
                                        <table class="table-01">
                                            <thead>
                                                <tr>
                                                    <th>Product</th>
                                                    <th>Quantity</th>
                                                    <th>Unit Price</th>
                                                    <th>Dept (DA)</th>
                                                    <th>Dept (%)</th>
                                                    <th>Total Price</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <td>Renew Premium Web Hosting (crstra-saffromfood.com)</td>
                                                <td>3</td>
                                                <td>1880.00</td>
                                                <td>880.00</td>
                                                <td>32.12%</td>
                                                <td>1880.00</td>
                                            </tbody>
                                        </table>
                                        <div class="order-price-table">
                                            <div class="order-price-table-contents">
                                                <div>
                                                    <strong>product price</strong>
                                                    <span>11.25$</span>
                                                </div>
                                                <div>
                                                    <strong>dept (%)</strong>
                                                    <span>0.00%</span>
                                                </div>
                                                <div>
                                                    <strong>sell price</strong>
                                                    <span>11.25</span>
                                                </div>
                                                <div class="border-top my-1"></div>
                                                <div>
                                                    <strong>total</strong>
                                                    <span>11.25</span>
                                                </div>	
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                -->
                            </tbody>
                        </table>

                    </div>

                </div>

            </div>

            <div class="col-md-12" data-perm="view_product_center_product_produced_actions">

                <a class="pb-4 d-inline-block fs-17 js_panel_toggler_button" href="#" data-target="#product_center_product_produced_actions_panel" >
                    <%= UI_DISPLAY_LANG.views.pages.global.show_production_actions %>
                </a>

                <div class="border rounded px-4 py-5 d-none" id="product_center_product_produced_actions_panel">

                    <div class="has-text-aligned-locale-inverted">
                        <div class="close-button-sm js_panel_close_button" data-target="#product_center_product_produced_actions_panel">
                            <i class="xfb xfb-close-sm-thin"></i>
                        </div>
                    </div>

                    <h4 class="h4 mb-3">
                        <%= UI_DISPLAY_LANG.views.pages.global.navs.nav151 %>
                    </h4>

                    <div class="py-4 px-3 mb-3 border rounded">
                        <div class="row gx-4 gy-3">
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`,
                                    { searchBtnId: 'product_center_product_produced_actions_search_btn' ,
                                    searchInputId: 'product_center_product_produced_actions_search_input' , }) -%>
                            </div>
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`,
                                    { dateStartId: 'product_center_product_produced_actions_date_start_input' ,
                                    dateEndId: 'product_center_product_produced_actions_date_end_input' ,
                                    dataIgnoreDefaultValue: true, }) -%>
                            </div>
                        </div>
                    </div>

                    <div id="product_center_product_produced_actions_pagination" class="flex flex-center my-3"></div>

                    <div class="table-div">

                        <div class="utable shadowed" id="product_center_product_produced_actions_tableElement">
                            <div class="thead">
                                <div class="td">#</div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th26 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th64 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th65 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th27 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th42 %></div>
                                <div class="td"></div>
                            </div>
                            <div class="tbody">
                             
                            </div>
                        </div>

                    </div>

                </div>

            </div>

            <div class="col-md-12" data-perm="view_product_center_product_consumed_actions">

                <a class="pb-4 d-inline-block fs-17 js_panel_toggler_button" href="#" data-target="#product_center_product_consumed_actions_panel" >
                    <%= UI_DISPLAY_LANG.views.pages.global.show_consumption_actions %>
                </a>

                <div class="border rounded px-4 py-5 d-none" id="product_center_product_consumed_actions_panel">

                    <div class="has-text-aligned-locale-inverted">
                        <div class="close-button-sm js_panel_close_button" data-target="#product_center_product_consumed_actions_panel">
                            <i class="xfb xfb-close-sm-thin"></i>
                        </div>
                    </div>

                    <h4 class="h4 mb-3">
                        <%= UI_DISPLAY_LANG.views.pages.global.navs.nav152 %>
                    </h4>

                    <div class="py-4 px-3 mb-3 border rounded">
                        <div class="row gx-4 gy-3">
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`,
                                    { searchBtnId: 'product_center_product_consumed_actions_search_btn' ,
                                    searchInputId: 'product_center_product_consumed_actions_search_input' , }) -%>
                            </div>
                            <div class="col-lg col-md-6 col-sm-12">
                                <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`,
                                    { dateStartId: 'product_center_product_consumed_actions_date_start_input' ,
                                    dateEndId: 'product_center_product_consumed_actions_date_end_input' ,
                                    dataIgnoreDefaultValue: true, }) -%>
                            </div>
                        </div>
                    </div>

                    <div id="product_center_product_consumed_actions_pagination" class="flex flex-center my-3"></div>

                    <div class="table-div">

                        <div class="utable shadowed" id="product_center_product_consumed_actions_tableElement">
                            <div class="thead">
                                <div class="td">#</div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th26 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th64 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th65 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th27 %></div>
                                <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th42 %></div>
                                <div class="td"></div>
                            </div>
                            <div class="tbody">
                             
                            </div>
                        </div>

                    </div>

                </div>

            </div>

        </div>

    </div>

</div>

<script>

    $(function()
    {

        const page_container = $('#show_center_product_page_container')

        if (!page_container[0]) return

        const ERROR_BOX = page_container.find('#ERROR_BOX')

        let ProductObject = sessionData(true)

        console.log(ProductObject)
        // Card
        const product_card_more_actions__menu = page_container.find('#product_card_more_actions__menu')

        const contractor_card_more_actions__menu = page_container.find('#contractor_card_more_actions__menu')
        const productName_element = page_container.find('#productName_element')
        const productAvatar_element = page_container.find('#productAvatar_element')
        // Profile data
        const personal_details_tab = page_container.find('#personal_details_tab')

        // product_related_invoices_panel
        const product_related_invoices_panel = page_container.find('#product_related_invoices_panel')
        // product_center_to_center_transfer_sent_invoices_panel
        const product_center_to_center_transfer_sent_invoices_panel = page_container.find('#product_center_to_center_transfer_sent_invoices_panel')
        // product_center_to_center_transfer_received_invoices_panel
        const product_center_to_center_transfer_received_invoices_panel = page_container.find('#product_center_to_center_transfer_received_invoices_panel')
        // product_center_product_produced_actions_panel
        const product_center_product_produced_actions_panel = page_container.find('#product_center_product_produced_actions_panel')
        // product_center_product_consumed_actions_panel
        const product_center_product_consumed_actions_panel = page_container.find('#product_center_product_consumed_actions_panel')

        // Panels
        personal_details_tab.on('tab:opened', e =>
        {
            const personal_details_tab__productCode_element = page_container.find('#personal_details_tab__productCode_element')
            const personal_details_tab__productBarcode_element = page_container.find('#personal_details_tab__productBarcode_element')
            const personal_details_tab__productName_element = page_container.find('#personal_details_tab__productName_element')
            const personal_details_tab__productDesc_element = page_container.find('#personal_details_tab__productDesc_element')
            const personal_details_tab__productBuyPrice_element = page_container.find('#personal_details_tab__productBuyPrice_element')
            const personal_details_tab__productPrice_element = page_container.find('#personal_details_tab__productPrice_element')
            const personal_details_tab__productWholesalePrice_element = page_container.find('#personal_details_tab__productWholesalePrice_element')
            const personal_details_tab__productHalfWholesalePrice_element = page_container.find('#personal_details_tab__productHalfWholesalePrice_element')
            const personal_details_tab__productQuantity_element = page_container.find('#personal_details_tab__productQuantity_element')
            const personal_details_tab__low_stock_threshold_element = page_container.find('#personal_details_tab__low_stock_threshold_element')
            const personal_details_tab__average_low_stock_threshold_element = page_container.find('#personal_details_tab__average_low_stock_threshold_element')
            const personal_details_tab__package_element = page_container.find('#personal_details_tab__package_element')
            const personal_details_tab__units_in_package_element = page_container.find('#personal_details_tab__units_in_package_element')
            const personal_details_tab__category_name_element = page_container.find('#personal_details_tab__category_name_element')
            const personal_details_tab__family_name_element = page_container.find('#personal_details_tab__family_name_element')

            personal_details_tab__productCode_element.text( checkNull(ProductObject.productCode) )
            personal_details_tab__productBarcode_element.text( checkNull(ProductObject.productBarcode) )
            personal_details_tab__productName_element.text( checkNull(ProductObject.productName) )
            personal_details_tab__productDesc_element.text( checkNull(ProductObject.productDesc) )
            personal_details_tab__productBuyPrice_element.text( checkNull(ProductObject.productBuyPrice) )
            personal_details_tab__productPrice_element.text( checkNull(ProductObject.productPrice) )
            personal_details_tab__productWholesalePrice_element.text( checkNull(ProductObject.productWholesalePrice) )
            personal_details_tab__productHalfWholesalePrice_element.text( checkNull(ProductObject.productHalfWholesalePrice) )
            personal_details_tab__productQuantity_element.text( checkNull(ProductObject.productQuantity) )
            personal_details_tab__low_stock_threshold_element.text( checkNull(ProductObject.low_stock_threshold) )
            personal_details_tab__average_low_stock_threshold_element.text( checkNull(ProductObject.average_low_stock_threshold) )
            personal_details_tab__package_element.text( checkNull(ProductObject.package) )
            personal_details_tab__units_in_package_element.text( checkNull(ProductObject.units_in_package) )
            personal_details_tab__category_name_element.text( checkNull(ProductObject.category_name) )
            personal_details_tab__family_name_element.text( checkNull(ProductObject.family_name) )
        })
        personal_details_tab.trigger('tab:opened')

        product_related_invoices_panel.on('panel:opened', e =>
        {
            setupAllRelatedInvoices()
        })

        product_center_to_center_transfer_sent_invoices_panel.on('panel:opened', e =>
        {
            setupCenterToCenterTransferSentInvoices()
        })

        product_center_to_center_transfer_received_invoices_panel.on('panel:opened', e =>
        {
            setupCenterToCenterTransferReceivedInvoices()
        })
        
        product_center_product_produced_actions_panel.on('panel:opened', e =>
        {
            setupCenterProductProducedActions()
        })

        product_center_product_consumed_actions_panel.on('panel:opened', e =>
        {
            setupCenterProductConsumedActions()
        })
      
        // setup card
        setupCard()
        function setupCard()
        {
            // display info
            productName_element.text(ProductObject.productName)
 
            if ( ProductObject.image )
            {
                productAvatar_element.attr('src', ProductObject.image.url)
            }
            // actions
            product_card_more_actions__menu.off('click').on('click', e =>
            {
                const target = $(e.target)

                if ( target.data('role') == 'UPDATE' )
                {
                    // check center
                    if ( USER_CONFIG.administration.clinicId == 0 ) CreateProductDialog__CentralAdmin(ProductObject)
                    else CreateProductDialog__Centers(ProductObject)
                }
            })
        }
        // setupCenterToCenterTransferSentInvoices
        async function setupAllRelatedInvoices()
        {
            const product_related_invoices_search_btn = page_container.find('#product_related_invoices_search_btn')
            const product_related_invoices_search_input = page_container.find('#product_related_invoices_search_input')
            const product_related_invoices_date_start_input = page_container.find('#product_related_invoices_date_start_input')
            const product_related_invoices_date_end_input = page_container.find('#product_related_invoices_date_end_input')

            const product_related_invoices_order_direction_select = page_container.find('#product_related_invoices_order_direction_select') 

            const product_related_invoices_pagination = page_container.find('#product_related_invoices_pagination')
            const product_related_invoices_tableElement = page_container.find('#product_related_invoices_tableElement')

            // product_related_invoices_tableElement click
            product_related_invoices_tableElement.off('click').on('click', async e => {
                var target = $(e.target);
                if (target[0].nodeName == 'TD') {
                    var parent = target.closest('tr');
                    var nextTR = parent.next();
                    nextTR.slideToggle(200)
                    parent.toggleClass('expanded');
                }

                if (target.data('role') == 'PRINT_INVOICE') {
                    e.preventDefault()
                    var parent = target.closest('[data-role="row"]')

                    parent.addClass('disabled')
                    var res = await ORDER_MODEL.show({
                        order_id: parent.data('id')
                    })
                    parent.removeClass('disabled')

                    if (res.code == 404) return

                    printInvoice({
                        data: res.data,
                        class: target.data('print-class'),
                    })
                }
            });
            
            // search
            product_related_invoices_search_btn.off('click').on('click', e => {
                product_related_invoices_search_input.trigger('keyup')
            })
            detectTypingEnd(product_related_invoices_search_input, val => {
            
                displayInvoices({
                    method_type: 'advancedSearch',
                    query: val,
                    advanced: {
                        start: product_related_invoices_date_start_input.val(),
                        end: product_related_invoices_date_end_input.val(),
                        order_direction: product_related_invoices_order_direction_select.find(':selected').val(),
                        has: {
                            order_item_id: ProductObject.productId,
                        }
                    }
                })
            })
            product_related_invoices_search_input.trigger('keyup')
            // displayInvoices
            async function displayInvoices(params) {
                SectionLoader(product_related_invoices_tableElement)

                if (params.method_type == 'advancedSearch') var res = await ORDER_MODEL.advancedSearch(params)

                SectionLoader(product_related_invoices_tableElement, '')

                if (res.code == 404) return

                var data = res.data
                var html = ''

                for (var i = 0; i < data.length; i++) {
                    var order = data[i];
                    // loop items
                    if (order.order_items) {
                        var itemsHTML = '<ul class="list-group list-group-flush list-group-numbered">';
                        var itemsHTML2 = '';
                        var order_item_dept_rate = 0.00;
                        var order_item_price = 0.00;
                        for (var j = 0; j < order.order_items.length; j++) {
                            var item = order.order_items[j];
                            order_item_dept_rate += parseFloat(item.item_dept.order_item_dept_rate);
                            order_item_price += parseFloat(item.order_item_price);
                            itemsHTML += `<li class="list-group-item text-04">${item.item_name}</li>`;
                            itemsHTML2 += `<tr>
                                    <td>${item.item_name}</td>
                                    <td>${item.order_item_quantity} ${FUI_DISPLAY_LANG.views.pages.global.units[item.order_item_unit]}</td>
                                    <td>${moneyFormat(item.order_item_price)}</td>
                                    <td>${moneyFormat(item.order_item_final_amount)}</td>
                                    </tr>`;
                        }
                        itemsHTML += '</ul>';
                    }

                    html += `<tr class="expand-row" data-role="row" data-id="${order.order_id}">
                        <td>
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK" data-orderid="${order.order_id}">
                        </td>
                        <td>${order.order_hash}</td>
                        <td>${order.order_date}|${order.order_time}</td>
                        <td>${moneyFormat(order.order_total_amount)}</td>
                        <td>${moneyFormat(order.order_amount_paid)}</td>
                        <td>${order.order_receiver_name}</td>
                        <td>
                            <div class="py-2 px-2">
                                <a class="d-inline-block mx-2 text-dark" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    ${FUI_DISPLAY_LANG.views.pages.global.more}
                                </a>
                                <ul class="dropdown-menu px-2">
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A3_PRINT" data-perm="a3_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A3_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A4_PRINT" data-perm="a4_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A4_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A5_PRINT" data-perm="a5_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A5_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link" data-role="PRINT_INVOICE" data-print-class="RECEIPT_7_5_CM_PRINT" data-perm="receipt_7_5_cm_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.RECEIPT_7_5_CM_PRINT}</a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                        <td style="width:15px">
                            <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                        </td>
                    </tr>PAG_SEP
                    <tr class="expand-row__row" style="display:none;">
                        <td colspan="10">
                            <table class="table-01">
                                <thead>
                                    <tr>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th26}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th27}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th28}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th29}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${itemsHTML2}
                                </tbody>
                            </table>
                            <div class="order-price-table">
                                <div class="order-price-table-contents">
                                    ${itemsHTML}	
                                </div>
                                <div class="order-price-table-contents">
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th30}</strong>
                                        <span>${moneyFormat(order.order_total_amount)}</span>
                                    </div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th31}</strong>
                                        <span>${moneyFormat(order.order_dept_amount)}</span>
                                    </div>
                                    <div class="border-top my-1"></div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th32}</strong>
                                        <span>${moneyFormat(order.order_amount_paid)}</span>
                                    </div>	
                                </div>
                            </div>
                        </td>
                    </tr>PAG_SEP`;
                }
                // add html
                new SmoothPagination(product_related_invoices_pagination, product_related_invoices_tableElement.find('tbody'), {
                    data: html.split('PAG_SEP'),
                    resultsPerPage: 12
                });
            } 
        }
        
        // setupCenterToCenterTransferSentInvoices
        async function setupCenterToCenterTransferSentInvoices()
        {
            const product_center_to_center_transfer_sent_invoices_search_btn = page_container.find('#product_center_to_center_transfer_sent_invoices_search_btn')
            const product_center_to_center_transfer_sent_invoices_search_input = page_container.find('#product_center_to_center_transfer_sent_invoices_search_input')
            const product_center_to_center_transfer_sent_invoices_date_start_input = page_container.find('#product_center_to_center_transfer_sent_invoices_date_start_input')
            const product_center_to_center_transfer_sent_invoices_date_end_input = page_container.find('#product_center_to_center_transfer_sent_invoices_date_end_input')
            const product_center_to_center_transfer_sent_invoices_pagination = page_container.find('#product_center_to_center_transfer_sent_invoices_pagination')
            const product_center_to_center_transfer_sent_invoices_tableElement = page_container.find('#product_center_to_center_transfer_sent_invoices_tableElement')

            // product_center_to_center_transfer_sent_invoices_tableElement click
            product_center_to_center_transfer_sent_invoices_tableElement.off('click').on('click', async e => {
                var target = $(e.target);
                if (target[0].nodeName == 'TD') {
                    var parent = target.closest('tr');
                    var nextTR = parent.next();
                    nextTR.slideToggle(200)
                    parent.toggleClass('expanded');
                }

                if (target.data('role') == 'PRINT_INVOICE') {
                    e.preventDefault()
                    var parent = target.closest('[data-role="row"]')

                    parent.addClass('disabled')
                    var res = await ORDER_MODEL.show({
                        order_id: parent.data('id')
                    })
                    parent.removeClass('disabled')

                    if (res.code == 404) return

                    printInvoice({
                        data: res.data,
                        class: target.data('print-class'),
                    })
                }
            });
            
            // search
            product_center_to_center_transfer_sent_invoices_search_btn.off('click').on('click', e => {
                product_center_to_center_transfer_sent_invoices_search_input.trigger('keyup')
            })
            detectTypingEnd(product_center_to_center_transfer_sent_invoices_search_input, val => {
            
                displayInvoices({
                    method_type: 'direction_center_to_center_transfer_search',
                    query: val,
                    advanced: {
                        start: product_center_to_center_transfer_sent_invoices_date_start_input.val(),
                        end: product_center_to_center_transfer_sent_invoices_date_end_input.val(),
                        supplier_id: ProductObject.administration_id,
                        has: {
                            order_item_id: ProductObject.productId,
                        }
                    }
                })
            })
            product_center_to_center_transfer_sent_invoices_search_input.trigger('keyup')
            // displayInvoices
            async function displayInvoices(params) {
                SectionLoader(product_center_to_center_transfer_sent_invoices_tableElement)

                if (params.method_type == 'direction_center_to_center_transfer_search') var res = await ORDER_MODEL.direction_center_to_center_transfer_search(params)

                SectionLoader(product_center_to_center_transfer_sent_invoices_tableElement, '')

                if (res.code == 404) return

                var data = res.data
                var html = ''

                for (var i = 0; i < data.length; i++) {
                    var order = data[i];
                    // loop items
                    if (order.order_items) {
                        var itemsHTML = '<ul class="list-group list-group-flush list-group-numbered">';
                        var itemsHTML2 = '';
                        var order_item_dept_rate = 0.00;
                        var order_item_price = 0.00;
                        for (var j = 0; j < order.order_items.length; j++) {
                            var item = order.order_items[j];
                            order_item_dept_rate += parseFloat(item.item_dept.order_item_dept_rate);
                            order_item_price += parseFloat(item.order_item_price);
                            itemsHTML += `<li class="list-group-item text-04">${item.item_name}</li>`;
                            itemsHTML2 += `<tr>
                                    <td>${item.item_name}</td>
                                    <td>${item.order_item_quantity} ${FUI_DISPLAY_LANG.views.pages.global.units[item.order_item_unit]}</td>
                                    <td>${moneyFormat(item.order_item_price)}</td>
                                    <td>${moneyFormat(item.order_item_final_amount)}</td>
                                    </tr>`;
                        }
                        itemsHTML += '</ul>';
                    }

                    html += `<tr class="expand-row" data-role="row" data-id="${order.order_id}">
                        <td>
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK" data-orderid="${order.order_id}">
                        </td>
                        <td>${order.order_hash}</td>
                        <td>${order.order_date}|${order.order_time}</td>
                        <td>${moneyFormat(order.order_total_amount)}</td>
                        <td>${moneyFormat(order.order_amount_paid)}</td>
                        <td>${order.order_receiver_name}</td>
                        <td>
                            <div class="py-2 px-2">
                                <a class="d-inline-block mx-2 text-dark" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    ${FUI_DISPLAY_LANG.views.pages.global.more}
                                </a>
                                <ul class="dropdown-menu px-2">
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A3_PRINT" data-perm="a3_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A3_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A4_PRINT" data-perm="a4_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A4_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A5_PRINT" data-perm="a5_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A5_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link" data-role="PRINT_INVOICE" data-print-class="RECEIPT_7_5_CM_PRINT" data-perm="receipt_7_5_cm_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.RECEIPT_7_5_CM_PRINT}</a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                        <td style="width:15px">
                            <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                        </td>
                    </tr>PAG_SEP
                    <tr class="expand-row__row" style="display:none;">
                        <td colspan="10">
                            <table class="table-01">
                                <thead>
                                    <tr>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th26}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th27}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th28}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th29}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${itemsHTML2}
                                </tbody>
                            </table>
                            <div class="order-price-table">
                                <div class="order-price-table-contents">
                                    ${itemsHTML}	
                                </div>
                                <div class="order-price-table-contents">
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th30}</strong>
                                        <span>${moneyFormat(order.order_total_amount)}</span>
                                    </div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th31}</strong>
                                        <span>${moneyFormat(order.order_dept_amount)}</span>
                                    </div>
                                    <div class="border-top my-1"></div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th32}</strong>
                                        <span>${moneyFormat(order.order_amount_paid)}</span>
                                    </div>	
                                </div>
                            </div>
                        </td>
                    </tr>PAG_SEP`;
                }
                // add html
                new SmoothPagination(product_center_to_center_transfer_sent_invoices_pagination, product_center_to_center_transfer_sent_invoices_tableElement.find('tbody'), {
                    data: html.split('PAG_SEP'),
                    resultsPerPage: 12
                });
            } 
        }
        // setupCenterToCenterTransferReceivedInvoices
        async function setupCenterToCenterTransferReceivedInvoices()
        {
            const product_center_to_center_transfer_received_invoices_search_btn = page_container.find('#product_center_to_center_transfer_received_invoices_search_btn')
            const product_center_to_center_transfer_received_invoices_search_input = page_container.find('#product_center_to_center_transfer_received_invoices_search_input')
            const product_center_to_center_transfer_received_invoices_date_start_input = page_container.find('#product_center_to_center_transfer_received_invoices_date_start_input')
            const product_center_to_center_transfer_received_invoices_date_end_input = page_container.find('#product_center_to_center_transfer_received_invoices_date_end_input')
            const product_center_to_center_transfer_received_invoices_pagination = page_container.find('#product_center_to_center_transfer_received_invoices_pagination')
            const product_center_to_center_transfer_received_invoices_tableElement = page_container.find('#product_center_to_center_transfer_received_invoices_tableElement')

            // product_center_to_center_transfer_received_invoices_tableElement click
            product_center_to_center_transfer_received_invoices_tableElement.off('click').on('click', async e => {
                var target = $(e.target);
                if (target[0].nodeName == 'TD') {
                    var parent = target.closest('tr');
                    var nextTR = parent.next();
                    nextTR.slideToggle(200)
                    parent.toggleClass('expanded');
                }

                if (target.data('role') == 'PRINT_INVOICE') {
                    e.preventDefault()
                    var parent = target.closest('[data-role="row"]')

                    parent.addClass('disabled')
                    var res = await ORDER_MODEL.show({
                        order_id: parent.data('id')
                    })
                    parent.removeClass('disabled')

                    if (res.code == 404) return

                    printInvoice({
                        data: res.data,
                        class: target.data('print-class'),
                    })
                }
            });
            
            // search
            product_center_to_center_transfer_received_invoices_search_btn.off('click').on('click', e => {
                product_center_to_center_transfer_received_invoices_search_input.trigger('keyup')
            })
            detectTypingEnd(product_center_to_center_transfer_received_invoices_search_input, val => {
            
                displayInvoices({
                    method_type: 'direction_center_to_center_transfer_search',
                    query: val,
                    advanced: {
                        start: product_center_to_center_transfer_received_invoices_date_start_input.val(),
                        end: product_center_to_center_transfer_received_invoices_date_end_input.val(),
                        user_id: ProductObject.administration_id,
                        has: {
                            order_item_id: ProductObject.productId,
                        }
                    }
                })
            })
            product_center_to_center_transfer_received_invoices_search_input.trigger('keyup')
            // displayInvoices
            async function displayInvoices(params) {
                SectionLoader(product_center_to_center_transfer_received_invoices_tableElement)

                if (params.method_type == 'direction_center_to_center_transfer_search') var res = await ORDER_MODEL.direction_center_to_center_transfer_search(params)

                SectionLoader(product_center_to_center_transfer_received_invoices_tableElement, '')

                if (res.code == 404) return

                var data = res.data
                var html = ''

                for (var i = 0; i < data.length; i++) {
                    var order = data[i];
                    // loop items
                    if (order.order_items) {
                        var itemsHTML = '<ul class="list-group list-group-flush list-group-numbered">';
                        var itemsHTML2 = '';
                        var order_item_dept_rate = 0.00;
                        var order_item_price = 0.00;
                        for (var j = 0; j < order.order_items.length; j++) {
                            var item = order.order_items[j];
                            order_item_dept_rate += parseFloat(item.item_dept.order_item_dept_rate);
                            order_item_price += parseFloat(item.order_item_price);
                            itemsHTML += `<li class="list-group-item text-04">${item.item_name}</li>`;
                            itemsHTML2 += `<tr>
                                    <td>${item.item_name}</td>
                                    <td>${item.order_item_quantity} ${FUI_DISPLAY_LANG.views.pages.global.units[item.order_item_unit]}</td>
                                    <td>${moneyFormat(item.order_item_price)}</td>
                                    <td>${moneyFormat(item.order_item_final_amount)}</td>
                                    </tr>`;
                        }
                        itemsHTML += '</ul>';
                    }

                    html += `<tr class="expand-row" data-role="row" data-id="${order.order_id}">
                        <td>
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK" data-orderid="${order.order_id}">
                        </td>
                        <td>${order.order_hash}</td>
                        <td>${order.order_date}|${order.order_time}</td>
                        <td>${moneyFormat(order.order_total_amount)}</td>
                        <td>${moneyFormat(order.order_amount_paid)}</td>
                        <td>${order.supplier_name}</td>
                        <td>
                            <div class="py-2 px-2">
                                <a class="d-inline-block mx-2 text-dark" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    ${FUI_DISPLAY_LANG.views.pages.global.more}
                                </a>
                                <ul class="dropdown-menu px-2">
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A3_PRINT" data-perm="a3_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A3_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A4_PRINT" data-perm="a4_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A4_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link d-block py-2 border-bottom" data-role="PRINT_INVOICE" data-print-class="A5_PRINT" data-perm="a5_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.A5_PRINT}</a>
                                    </li>
                                    <li>
                                        <a href="#" class="no-link" data-role="PRINT_INVOICE" data-print-class="RECEIPT_7_5_CM_PRINT" data-perm="receipt_7_5_cm_invoice_print">${FUI_DISPLAY_LANG.views.pages.global.print_sizes.RECEIPT_7_5_CM_PRINT}</a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                        <td style="width:15px">
                            <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                        </td>
                    </tr>PAG_SEP
                    <tr class="expand-row__row" style="display:none;">
                        <td colspan="10">
                            <table class="table-01">
                                <thead>
                                    <tr>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th26}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th27}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th28}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th29}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${itemsHTML2}
                                </tbody>
                            </table>
                            <div class="order-price-table">
                                <div class="order-price-table-contents">
                                    ${itemsHTML}	
                                </div>
                                <div class="order-price-table-contents">
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th30}</strong>
                                        <span>${moneyFormat(order.order_total_amount)}</span>
                                    </div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th31}</strong>
                                        <span>${moneyFormat(order.order_dept_amount)}</span>
                                    </div>
                                    <div class="border-top my-1"></div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th32}</strong>
                                        <span>${moneyFormat(order.order_amount_paid)}</span>
                                    </div>	
                                </div>
                            </div>
                        </td>
                    </tr>PAG_SEP`;
                }
                // add html
                new SmoothPagination(product_center_to_center_transfer_received_invoices_pagination, product_center_to_center_transfer_received_invoices_tableElement.find('tbody'), {
                    data: html.split('PAG_SEP'),
                    resultsPerPage: 12
                });
            } 
        }
        // setupCenterProductProducedActions
        function setupCenterProductProducedActions()
        {
            
            const product_center_product_produced_actions_search_btn = page_container.find('#product_center_product_produced_actions_search_btn')
            const product_center_product_produced_actions_search_input = page_container.find('#product_center_product_produced_actions_search_input')
            const product_center_product_produced_actions_date_start_input = page_container.find('#product_center_product_produced_actions_date_start_input')
            const product_center_product_produced_actions_date_end_input = page_container.find('#product_center_product_produced_actions_date_end_input')
            const product_center_product_produced_actions_pagination = page_container.find('#product_center_product_produced_actions_pagination')
            const product_center_product_produced_actions_tableElement = page_container.find('#product_center_product_produced_actions_tableElement')
          
            // product_center_product_produced_actions_tableElement click
            product_center_product_produced_actions_tableElement.off('click').on('click', async e => {
                var target = $(e.target);
                
            });
            
            // search
            product_center_product_produced_actions_search_btn.off('product_center_product_produced_actions_search_btn').on('click', e => {
                product_center_product_produced_actions_search_input.trigger('keyup')
            })
            detectTypingEnd(product_center_product_produced_actions_search_input, val => {
                displayActions({
                    method_type: 'center_produced_actions_search',
                    query: val,
                    advanced: {
                        start: product_center_product_produced_actions_date_start_input.val(),
                        end: product_center_product_produced_actions_date_end_input.val(),
                        productId: ProductObject.productId,
                    }
                })
            })
            product_center_product_produced_actions_search_input.trigger('keyup')
            // displayDeptActions
            async function displayActions(params) {
                SectionLoader(product_center_product_produced_actions_tableElement)

                if (params.method_type == 'center_produced_actions_search') var res = await PRODUCT_MODEL.center_produced_actions_search(params)
                
                SectionLoader(product_center_product_produced_actions_tableElement, '')

                if (res.code == 404) return

                var data = res.data
                var html = ''

                $.each(data, (k,v) =>
                {
                    html += `
                    <div class="tr" data-role="row" data-id="${v.id}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.productCode}</div>
                            <div class="">${v.productName}</div>
                        </div>
                        <div class="td">
                            ${ checkNull(v.category_name) }    
                        </div>
                        <div class="td">
                            ${ checkNull(v.family_name) }      
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.productQuantity} ${FUI_DISPLAY_LANG.views.pages.global.units[v.unit] }</div>      
                        </div>
                        <div class="td">
                            ${ checkNull(v.employee_name) }     
                        </div>
                        <div class="td">
                            <div class="mb-2">${ formatTimeStamp(v.created_at) }</div>
                            <div class="">${v.created_at}</div>		
                        </div>
                    </div>PAG_SEP
                    `
                })
                
                // add html
                new SmoothPagination(product_center_product_produced_actions_pagination, product_center_product_produced_actions_tableElement.find('.tbody'), {
                    data: html.split('PAG_SEP'),
                    resultsPerPage: 12
                });
            } 
        }
        // setupCenterProductConsumedActions
        function setupCenterProductConsumedActions()
        {
            
            const product_center_product_consumed_actions_search_btn = page_container.find('#product_center_product_consumed_actions_search_btn')
            const product_center_product_consumed_actions_search_input = page_container.find('#product_center_product_consumed_actions_search_input')
            const product_center_product_consumed_actions_date_start_input = page_container.find('#product_center_product_consumed_actions_date_start_input')
            const product_center_product_consumed_actions_date_end_input = page_container.find('#product_center_product_consumed_actions_date_end_input')
            const product_center_product_consumed_actions_pagination = page_container.find('#product_center_product_consumed_actions_pagination')
            const product_center_product_consumed_actions_tableElement = page_container.find('#product_center_product_consumed_actions_tableElement')
          
            // product_center_product_consumed_actions_tableElement click
            product_center_product_consumed_actions_tableElement.off('click').on('click', async e => {
                var target = $(e.target);
                
            });
            
            // search
            product_center_product_consumed_actions_search_btn.off('product_center_product_consumed_actions_search_btn').on('click', e => {
                product_center_product_consumed_actions_search_input.trigger('keyup')
            })
            detectTypingEnd(product_center_product_consumed_actions_search_input, val => {
                displayActions({
                    method_type: 'center_consumed_actions_search',
                    query: val,
                    advanced: {
                        start: product_center_product_consumed_actions_date_start_input.val(),
                        end: product_center_product_consumed_actions_date_end_input.val(),
                        productId: ProductObject.productId,
                    }
                })
            })
            product_center_product_consumed_actions_search_input.trigger('keyup')
            // displayDeptActions
            async function displayActions(params) {
                SectionLoader(product_center_product_consumed_actions_tableElement)

                if (params.method_type == 'center_consumed_actions_search') var res = await PRODUCT_MODEL.center_consumed_actions_search(params)
                
                SectionLoader(product_center_product_consumed_actions_tableElement, '')

                if (res.code == 404) return

                var data = res.data
                var html = ''

                $.each(data, (k,v) =>
                {
                    html += `
                    <div class="tr" data-role="row" data-id="${v.id}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.productCode}</div>
                            <div class="">${v.productName}</div>
                        </div>
                        <div class="td">
                            ${ checkNull(v.category_name) }    
                        </div>
                        <div class="td">
                            ${ checkNull(v.family_name) }      
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.productQuantity} ${FUI_DISPLAY_LANG.views.pages.global.units[v.unit] }</div>      
                        </div>
                        <div class="td">
                            ${ checkNull(v.employee_name) }     
                        </div>
                        <div class="td">
                            <div class="mb-2">${ formatTimeStamp(v.created_at) }</div>
                            <div class="">${v.created_at}</div>		
                        </div>
                    </div>PAG_SEP
                    `
                })
                
                // add html
                new SmoothPagination(product_center_product_consumed_actions_pagination, product_center_product_consumed_actions_tableElement.find('.tbody'), {
                    data: html.split('PAG_SEP'),
                    resultsPerPage: 12
                });
            } 
        }
        
    
    })

</script>