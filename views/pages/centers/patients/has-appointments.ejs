<div class="container-fluid" id="allPatientsHasAptContainer">
	<div class="wrapper d-none">
		<h1 class="title-medium"><%= UI_DISPLAY_LANG.views.pages.all_patients.sectionTitle %></h1>
	</div>
	<div class="alert alert-info mt-3 mb-2" style="display:none;" id="ERROR_BOX">
		<img src="assets/img/utils/info.png" class="alert-icon" alt="">
		<div class="alert-text" id="text"></div>
	</div>
	<div class="mt-3 WRAPPER" id="wrapper01">

		<div class="table-nav">

            <div class="row gx-4 gy-3 mb-3">

                <div class="col-lg-12 col-md-12">
                    <button class="btn btn-danger btn-sm" id="deleteSelectedBTN" data-perm="delete_patients">
                        <%= UI_DISPLAY_LANG.views.pages.global.delete_selected_button %>
                    </button>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-12">
					<%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                        searchBtnId: 'search_btn',
                        searchInputId: 'search_input',
                    }) -%>
				</div>
				<div class="col-lg-3 col-md-6 col-sm-12">
					<%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                        dateStartId: 'date_start_input',
                        dateEndId: 'date_end_input',
                        dataIgnoreDefaultValue: true,
                    }) -%>
				</div>
                <div class="col-lg col-md col-sm-12">
                    <div class="fs-20 mb-2">
                        <span class="fw-700"><%= UI_DISPLAY_LANG.views.pages.global.text22 %>:</span> <span class="text-success" id="patients_total">0</span>
                    </div>
                    <ul class="list-group list-group-flush" id="patients_extra_data_list">
                        <!-- <li class="list-group-item">An item</li> -->
                    </ul>
                </div>

            </div>

			<div class="row gx-2 gy-2">
                <div class="col-lg-12 col-md-12 col-sm-12" data-perm="transfer_patients_records_to_another_center">
                    <button class="btn btn-warning" id="transform_patients_button_toggler">
                        <%= UI_DISPLAY_LANG.views.pages.global.btn1 %>
                    </button>

                    <div class="mt-3 border p-3 rounded d-none" style="max-width: 350px;">
                        <form action="" id="transfer_patients_to_another_center_form">

                            <div class="mb-2">
    
                                <label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.global.label13 %></label>
                                <select name="" class="select-01" id="clinicSelect">
                            
                                </select>
    
                            </div>

                            <div class="">
                                <input type="submit" class="btn btn-primary btn-sm" value="<%= UI_DISPLAY_LANG.views.pages.global.transfer_records_button %>">
                            </div>
    
                        </form>
                    </div>

                </div>
			</div>

		</div>
		<div id="pagination1" class="my-3 flex flex-center"></div>
		<div class="row gx-4 gy-3" id="tableElement1">
			<!--
			<div class="col-lg-4 col-md-6 col-sm-12">
				<div class="card hover-shadow" data-role="APT" data-aptid="" style="cursor: pointer;">
					<div class="card-body no-pointer">
						<div class="h5">قسم الحجامة</div>
						<div class="text-02">(4) جلسات</div>
					</div>
				</div>
			</div>
			-->
		</div>
	</div>
	<div class="mt-3 WRAPPER" id="wrapper02" style="display: none;">
		<button class="btn btn-light btn-sm mb-4" data-role="BACK_TO_MAIN_UI_BTN" style="width:120px;">
			<i class="fas fa-arrow-left"></i>
		</button>

		<div class="row gx-4 gy-3 bg-white mx-0 mb-3" id="patientInfoDiv">
			<!--
			<div class="col-lg-4 col-md-6 col-sm-12">
				<div class="mb-5 py-2 border-bottom">
					<div class="card-body no-pointer">
						<div class="h5"></div>
						<div class="text-02"></div>
					</div>
				</div>
			</div>
			-->

		</div>

        <div class="row gx-0 gy-5">

            <div class="col-lg-12 col-md-12 app-block d-none" id="products_invoices" data-perm="view_patient_product_invoices">

                <h4 class="h4 mb-3"><%= UI_DISPLAY_LANG.views.pages.global.navs.nav66 %></h4>

                <div class="py-4 px-3 mb-3 border rounded">
                    <div class="row gx-4 gy-3">
                        <div class="col-lg col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                                searchBtnId: 'products_invoices_search_btn',
                                searchInputId: 'products_invoices_search_input',
                            }) -%>
                        </div>
                        <div class="col-lg col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                                dateStartId: 'products_invoices_date_start_input',
                                dateEndId: 'products_invoices_date_end_input',
                            }) -%>
                        </div>
                    </div>
                </div>
                <div id="products_invoices_pagination" class="flex flex-center my-3"></div>
                <div class="table-div bg-white border rounded">
                    <table class="table-01" id="products_invoices_tableElement">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th><%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th01 %></th>
                                <th><%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th02 %></th>
                                <th><%= UI_DISPLAY_LANG.views.pages.all_products_invoices.th04 %></th>
                                <th><%= UI_DISPLAY_LANG.views.pages.global.th32 %></th>
                                <th><%= UI_DISPLAY_LANG.views.pages.global.th16 %></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <!--
                            <tr class="expand-row">
                                <td>
                                    <input type="checkbox" class="form-check-input" data-role="CHECK" data-orderid="">
                                </td>
                                <td> HG38020496 </td>
                                <td> 2022-06-17 </td>
                                <td> - </td>
                                <td> $11.99 </td>
                                <td style="width:20px">
                                    <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                                </td>
                            </tr>
                            <tr class="expand-row__row" style="display:none;">
                                <td colspan="10">
                                    <table class="table-01">
                                        <thead>
                                            <tr>
                                                <th>Product</th>
                                                <th>Quantity</th>
                                                <th>Unit Price</th>
                                                <th>Dept (DA)</th>
                                                <th>Dept (%)</th>
                                                <th>Total Price</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <td>Renew Premium Web Hosting (crstra-saffromfood.com)</td>
                                            <td>3</td>
                                            <td>1880.00</td>
                                            <td>880.00</td>
                                            <td>32.12%</td>
                                            <td>1880.00</td>
                                        </tbody>
                                    </table>
                                    <div class="order-price-table">
                                        <div class="order-price-table-contents">
                                            <div>
                                                <strong>product price</strong>
                                                <span>11.25$</span>
                                            </div>
                                            <div>
                                                <strong>dept (%)</strong>
                                                <span>0.00%</span>
                                            </div>
                                            <div>
                                                <strong>sell price</strong>
                                                <span>11.25</span>
                                            </div>
                                            <div class="border-top my-1"></div>
                                            <div>
                                                <strong>total</strong>
                                                <span>11.25</span>
                                            </div>	
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            -->
                        </tbody>
                    </table>
                </div>

            </div>

            <div class="col-lg-12 col-md-12 app-block d-none" id="dept_actions" data-perm="view_patient_dept_actions">

                <h4 class="h4 mb-3"><%= UI_DISPLAY_LANG.views.pages.global.navs.nav54 %></h4>

                <div class="py-4 px-3 mb-3 border rounded">

                    <div class="row gx-4 gy-3">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                                searchBtnId: 'dept_actions_search_btn',
                                searchInputId: 'dept_actions_search_input',
                            }) -%>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                                dateStartId: 'dept_actions_date_start_input',
                                dateEndId: 'dept_actions_date_end_input',
                            }) -%>
                        </div>
                        <div class="col-lg col-md col-sm-12">
                            <div class="fs-20 mb-2">
                                <span class="fw-700"><%= UI_DISPLAY_LANG.views.pages.global.text22 %>:</span> <span class="text-success" id="total_depts">0.00</span>
                            </div>
                            <ul class="list-group list-group-flush" id="dept_actions_extra_data_list">
                                <!-- <li class="list-group-item">An item</li> -->
                            </ul>
                        </div>
                    </div>

                </div>
                <div id="dept_actions_pagination" class="flex flex-center my-3"></div>
                <div class="table-div bg-white border rounded">
                    <div class="utable shadowed" id="dept_actions_tableElement">
                        <div class="thead">
                            <div class="td">#</div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th1 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th20 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th21 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th22 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th23 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th6 %></div>
                        </div>
                        <div class="tbody">
                         
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="col-lg-12 col-md-12 app-block d-none" id="prescriptions_history" data-perm="view_patient_prescriptions_history">

                <h4 class="h4 mb-3"><%= UI_DISPLAY_LANG.views.pages.global.navs.nav6 %></h4>

                <div class="py-4 px-3 mb-3 border rounded">

                    <div class="row gx-4 gy-3">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                                searchBtnId: 'prescriptions_history_search_btn',
                                searchInputId: 'prescriptions_history_search_input',
                            }) -%>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                                dateStartId: 'prescriptions_history_date_start_input',
                                dateEndId: 'prescriptions_history_date_end_input',
                            }) -%>
                        </div>
                        <div class="col-lg col-md col-sm-12">
                            <div class="fs-20 mb-2">
                                <span class="fw-700"><%= UI_DISPLAY_LANG.views.pages.global.text22 %>:</span> <span class="text-success" id="prescriptions_history_total">0</span>
                            </div>
                            <ul class="list-group list-group-flush" id="prescriptions_history_extra_data_list">
                                <!-- <li class="list-group-item">An item</li> -->
                            </ul>
                        </div>
                    </div>

                </div>
                <div id="prescriptions_history_pagination" class="flex flex-center my-3"></div>
                <div class="table-div bg-white border rounded">
                    <div class="utable shadowed" id="prescriptions_history_tableElement">
                        <div class="thead">
                            <div class="td">#</div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th1 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th12 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th42 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.attributes.medicines %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th6 %></div>
                        </div>
                        <div class="tbody">
                            <!-- <div class="tr" data-role="row" data-id="${v.prescriptionId}">
                                <div class="td">
                                    <div class="mb-2">${v.patientName}</div>
                                    <div class="">${v.patientPhone}</div>
                                </div>
                                <div class="td">
                                    ${v.clinicName}
                                </div>
                                <div class="td">
                                    ${v.employee_name}
                                </div>
                                <div class="td">
                                    <div class="text-04 mb-2">${FUI_DISPLAY_LANG.views.pages.global.attributes.medicines}: (${medicines})</div>
                                    <div class="">
                                        <ul class="list-group list-group-flush">
                                            ${medicines_list}
                                        </ul>
                                    </div>
                                </div>
                                <div class="td">
                                    ${v.prescriptionDate} ${v.prescriptionTime} 
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="col-lg-12 col-md-12 app-block d-none" id="consommables_history" data-perm="view_patient_consommables_history">

                <h4 class="h4 mb-3"><%= UI_DISPLAY_LANG.views.pages.global.navs.nav51 %></h4>

                <div class="py-4 px-3 mb-3 border rounded">

                    <div class="row gx-4 gy-3">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                                searchBtnId: 'consommables_history_search_btn',
                                searchInputId: 'consommables_history_search_input',
                            }) -%>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                                dateStartId: 'consommables_history_date_start_input',
                                dateEndId: 'consommables_history_date_end_input',
                            }) -%>
                        </div>
                        <div class="col-lg col-md col-sm-12">
                            <div class="fs-20 mb-2">
                                <span class="fw-700"><%= UI_DISPLAY_LANG.views.pages.global.text22 %>:</span> <span class="text-success" id="consommables_history_total">0</span>
                            </div>
                            <ul class="list-group list-group-flush" id="consommables_history_extra_data_list">
                                <!-- <li class="list-group-item">An item</li> -->
                            </ul>
                        </div>
                    </div>

                </div>
                <div id="consommables_history_pagination" class="flex flex-center my-3"></div>
                <div class="table-div bg-white border rounded">
                    <div class="utable shadowed" id="consommables_history_tableElement">
                        <div class="thead">
                            <div class="td">#</div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th1 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th12 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th26 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th27 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th6 %></div>
                        </div>
                        <div class="tbody">
                            <!-- <div class="tr" data-role="row" data-id="${v.id}">
                                <div class="td">
                                    <div class="mb-2">${v.patientName}</div>
                                    <div class="">${v.patientPhone}</div>
                                </div>
                                <div class="td">
                                    ${v.administration_name}
                                </div>
                                <div class="td">
                                    <div class="mb-2">${v.consommable_code}</div>
                                    <div class="">${v.consommable_name}</div>
                                </div>
                                <div class="td">
                                    (<span class="text-success">${v.consommable_quantity}</span>)
                                </div>
                                <div class="td">
                                    ${v.created_at}
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="col-lg-12 col-md-12 app-block d-none" id="appointments_history" data-perm="view_patient_appointments_history">

                <h4 class="h4 mb-3"><%= UI_DISPLAY_LANG.views.pages.global.navs.nav73 %></h4>

                <div class="py-4 px-3 mb-3 border rounded">

                    <div class="row gx-4 gy-3">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/searchbox.template.ejs`, {
                                searchBtnId: 'appointments_history_search_btn',
                                searchInputId: 'appointments_history_search_input',
                            }) -%>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <%- include(`${SETTINGS.UI_Settings.MAIN_DIR_NAME}/views/templates/start-end-date.template.ejs`, {
                                dateStartId: 'appointments_history_date_start_input',
                                dateEndId: 'appointments_history_date_end_input',
                            }) -%>
                        </div>
                        <div class="col-lg col-md col-sm-12">
                            <div class="fs-20 mb-2">
                                <span class="fw-700"><%= UI_DISPLAY_LANG.views.pages.global.text22 %>:</span> <span class="text-success" id="appointments_history_total">0</span>
                            </div>
                            <ul class="list-group list-group-flush" id="appointments_history_extra_data_list">
                                <!-- <li class="list-group-item">An item</li> -->
                            </ul>
                        </div>
                    </div>

                </div>
                <div id="appointments_history_pagination" class="flex flex-center my-3"></div>
                <div class="table-div bg-white border rounded">
                    <div class="utable shadowed" id="appointments_history_tableElement">
                        <div class="thead">
                            <div class="td">#</div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th47 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th48 %></div>
                            <div class="td" data-perm="view_patient_appointment_price"><%= UI_DISPLAY_LANG.views.pages.global.th37 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th16 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th21 %></div>
                            <div class="td"><%= UI_DISPLAY_LANG.views.pages.global.th6 %></div>
                        </div>
                        <div class="tbody">
                         
                        </div>
                    </div>
                </div>
                
            </div>

        </div>

	</div>
	<div class="mt-3 app-block WRAPPER" id="wrapper03" style="display: none;">

        <h1 class="display-6 mb-5" id="patient_name"></h1>
        
		<button class="btn btn-light btn-sm mb-4" data-role="BACK_TO_MAIN_UI_BTN" style="width:120px;">
			<i class="fas fa-arrow-left"></i>
		</button>
		<div class="accordion accordion-01" id="patientSettingsAccordion">
			<div class="accordion-item" id="item1" data-perm="create_patient_chronic_diseases_info">
				<h2 class="accordion-header" id="headingFive">
					<button class="accordion-button" style="background: transparent;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn06 %>
					</button>
				</h2>
				<div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#patientSettingsAccordion" >
					<div class="accordion-body">
						<form action="#" id="moreInfoForm">
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label01 %></label>
								<select name="" class="input-text my-2" id="bloodPressureSelect">
									<option value="2">
										<%= UI_DISPLAY_LANG.views.pages.add_patients.form01.select03.option01 %>
									</option>
									<option value="1" selected>
										<%= UI_DISPLAY_LANG.views.pages.add_patients.form01.select03.option02 %>
									</option>
								</select>
								<input type="text" step="any" class="input-text input-text-outline disabled" id="bloodPressureInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label02 %></label>
								<select name="" class="input-text my-2" id="diabetesSelect">
									<option value="2">
										<%= UI_DISPLAY_LANG.views.pages.add_patients.form01.select02.option01 %>
									</option>
									<option value="1" selected>
										<%= UI_DISPLAY_LANG.views.pages.add_patients.form01.select02.option02 %>
									</option>
								</select>
								<input type="text" step="any" class="input-text input-text-outline disabled" id="diabetesInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label08 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="insulinInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label09 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="TSHInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label10 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="HBA1cInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label11 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="VSInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label12 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="CRPInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label05 %></label>
								<input type="date" class="input-text input-text-outline" id="infoDateInput" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label06 %></label>
								<input type="time" step="any" class="input-text input-text-outline" id="infoTimeInput" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label07 %></label>
								<input type="file" class="input-text" id="fileInput" accept="image/*,application/pdf">
							</div>
							<div>
								<input type="submit" class="btn btn-primary btn-sm" value="<%= UI_DISPLAY_LANG.views.pages.all_patients.form01.submitBTN01 %>">
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-item" id="item2" data-perm="create_patient_weights_info">
				<h2 class="accordion-header" id="headingSeven">
					<button class="accordion-button" style="background: transparent;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn08 %>
					</button>
				</h2>
				<div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<form action="#" id="moreInfoForm2">
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form03.label01 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="weightInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form03.label02 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="abdominalCircumferenceInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form03.label03 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="chestCircumferenceInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form03.label04 %></label>
								<input type="text" step="any" class="input-text input-text-outline" id="ArmsCircumferenceInput">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label05 %></label>
								<input type="date" class="input-text input-text-outline" id="infoDateInput2" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label06 %></label>
								<input type="time" step="any" class="input-text input-text-outline" id="infoTimeInput2" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label07 %></label>
								<input type="file" class="input-text" id="fileInput2" accept="image/*,application/pdf">
							</div>
							<div>
								<input type="submit" class="btn btn-primary btn-sm" value="<%= UI_DISPLAY_LANG.views.pages.all_patients.form01.submitBTN01 %>">
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-item" id="item3" data-perm="create_patient_medical_tests_info">
				<h2 class="accordion-header" id="headingEleven">
					<button class="accordion-button" style="background: transparent;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEleven" aria-expanded="false" aria-controls="collapseEleven">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn16 %>
					</button>
				</h2>
				<div id="collapseEleven" class="accordion-collapse collapse" aria-labelledby="headingEleven" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<form action="#" id="moreInfoForm3">
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label05 %></label>
								<input type="date" class="input-text input-text-outline" id="infoDateInput3" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label06 %></label>
								<input type="time" step="any" class="input-text input-text-outline" id="infoTimeInput3" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form04.label01 %></label>
								<input type="file" class="input-text" id="fileInput3" multiple accept="image/*">
							</div>
							<div>
								<input type="submit" class="btn btn-primary btn-sm" value="<%= UI_DISPLAY_LANG.views.pages.all_patients.form04.submitBTN01 %>">
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-item" id="item4" data-perm="create_patient_images">
				<h2 class="accordion-header" id="headingTwelve">
					<button class="accordion-button" style="background: transparent;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwelve" aria-expanded="false" aria-controls="collapseTwelve">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn18 %>
					</button>
				</h2>
				<div id="collapseTwelve" class="accordion-collapse collapse" aria-labelledby="headingTwelve" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<form action="#" id="moreInfoForm4">
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label05 %></label>
								<input type="date" class="input-text input-text-outline" id="infoDateInput4" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form01.label06 %></label>
								<input type="time" step="any" class="input-text input-text-outline" id="infoTimeInput4" value="">
							</div>
							<div class="mb-2">
								<label for="" class="form-label"><%= UI_DISPLAY_LANG.views.pages.all_patients.form04.label01 %></label>
								<input type="file" class="input-text" id="fileInput4" multiple accept="image/*">
							</div>
							<div>
								<input type="submit" class="btn btn-primary btn-sm" value="<%= UI_DISPLAY_LANG.views.pages.all_patients.form04.submitBTN01 %>">
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingOne">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn02 %>
					</button>
				</h2>
				<div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination0" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement0">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th01 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingEight">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn09 %>
					</button>
				</h2>
				<div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination5" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement5">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th06 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading11">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11" aria-expanded="false" aria-controls="collapse11">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn12 %>
					</button>
				</h2>
				<div id="collapse11" class="accordion-collapse collapse" aria-labelledby="heading11" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination8" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement8">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th06 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading12">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12" aria-expanded="false" aria-controls="collapse12">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn13 %>
					</button>
				</h2>
				<div id="collapse12" class="accordion-collapse collapse" aria-labelledby="heading12" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination9" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement9">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th06 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading13">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13" aria-expanded="false" aria-controls="collapse13">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn14 %>
					</button>
				</h2>
				<div id="collapse13" class="accordion-collapse collapse" aria-labelledby="heading13" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination10" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement10">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th06 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading14">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14" aria-expanded="false" aria-controls="collapse14">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn15 %>
					</button>
				</h2>
				<div id="collapse14" class="accordion-collapse collapse" aria-labelledby="heading14" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination11" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement11">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th06 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingTwo">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn03 %>
					</button>
				</h2>
				<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination2" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement2">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th03 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingThree">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn04 %>
					</button>
				</h2>
				<div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">

                        <div class="row gx-4 gy-4">

                            <div class="col-lg-2 col-md-6">

                                <div class="images-carousel-trigger" data-target="#weight_images_carousel" data-for="weight">
                            
                                    <div class="mb-2">
                                        <a href="#" id="button"><%= UI_DISPLAY_LANG.views.pages.global.text1 %></a>
                                    </div>
        
                                    <div style="display:none;">
                                        <input type="text" id="total_pages" min="1" step="1" class="input-text input-text-outline">
                                    </div>
        
                                </div>

                            </div>

                        </div>

						<div id="pagination3" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement3">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th04 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingFour">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn05 %>
					</button>
				</h2>
				<div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination4" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement4">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th05 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingNine">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn10 %>
					</button>
				</h2>
				<div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination6" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement6">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th05 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingTen">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn11 %>
					</button>
				</h2>
				<div id="collapseTen" class="accordion-collapse collapse" aria-labelledby="headingTen" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="pagination7" class="my-3 flex flex-center"></div>
						<div class="utable shadowed" id="tableElement7">
							<div class="thead">
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th05 %></div>
								<div class="td"><%= UI_DISPLAY_LANG.views.pages.all_patients.th02 %></div>
								<div class="td"></div>
								<div class="td"></div>
							</div>
							<div class="tbody">
								<!--
								<div class="tr">
									<div class="td">15</div>
									<div class="td">2022-06-24 | 03:54:43</div>
									<div class="td pointer">
										<button class="btn btn-danger btn-sm" data-role="DELETE" data-id="">
											<span class="no-pointer">
												<i class="fas fa-trash"></i>
											</span>
										</button>
									</div>
								</div>
								-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading15">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse15" aria-expanded="false" aria-controls="collapse15">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn17 %>
					</button>
				</h2>
				<div id="collapse15" class="accordion-collapse collapse" aria-labelledby="heading15" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="medicalTestsImagesCarousel" class="carousel slide" data-bs-ride="carousel">
							<div class="carousel-inner">
							  <!-- <div class="carousel-item active" data-bs-interval="10000">
								<img src="..." class="d-block w-100" alt="...">
							  </div>
							  <div class="carousel-item" data-bs-interval="2000">
								<div class="row gx-0 gy-0">
									<div class="col">
										<img src="..." class="d-block w-100" alt="...">
									</div>
								</div>
							  </div>
							  <div class="carousel-item">
								<img src="..." class="d-block w-100" alt="...">
							  </div> -->
							</div>
							<button class="carousel-control-prev" type="button" data-bs-target="#medicalTestsImagesCarousel" data-bs-slide="prev">
							  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
							  <span class="visually-hidden">Previous</span>
							</button>
							<button class="carousel-control-next" type="button" data-bs-target="#medicalTestsImagesCarousel" data-bs-slide="next">
							  <span class="carousel-control-next-icon" aria-hidden="true"></span>
							  <span class="visually-hidden">Next</span>
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="accordion-item">
				<h2 class="accordion-header" id="heading16">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse16" aria-expanded="false" aria-controls="collapse16">
						
						<%= UI_DISPLAY_LANG.views.pages.all_patients.btn19 %>
					</button>
				</h2>
				<div id="collapse16" class="accordion-collapse collapse" aria-labelledby="heading16" data-bs-parent="#patientSettingsAccordion">
					<div class="accordion-body">
						<div id="albumsCarousel" class="carousel slide" data-bs-ride="carousel">
							<div class="carousel-inner">
							  <!-- <div class="carousel-item active" data-bs-interval="10000">
								<img src="..." class="d-block w-100" alt="...">
							  </div>
							  <div class="carousel-item" data-bs-interval="2000">
								<div class="row gx-0 gy-0">
									<div class="col">
										<img src="..." class="d-block w-100" alt="...">
									</div>
								</div>
							  </div>
							  <div class="carousel-item">
								<img src="..." class="d-block w-100" alt="...">
							  </div> -->
							</div>
							<button class="carousel-control-prev" type="button" data-bs-target="#albumsCarousel" data-bs-slide="prev">
							  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
							  <span class="visually-hidden">Previous</span>
							</button>
							<button class="carousel-control-next" type="button" data-bs-target="#albumsCarousel" data-bs-slide="next">
							  <span class="carousel-control-next-icon" aria-hidden="true"></span>
							  <span class="visually-hidden">Next</span>
							</button>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>

<script>

$(function()
{

var page_container = $('#allPatientsHasAptContainer');

var ERROR_BOX = page_container.find('#ERROR_BOX');
var deleteSelectedBTN = page_container.find('#deleteSelectedBTN');
var filterDateInput = page_container.find('#filterDateInput');
var searchBTN = page_container.find('#searchBTN');
var searchInput = page_container.find('#searchInput');
var pagination1 = page_container.find('#pagination1');
var tableElement1 = page_container.find('#tableElement1');

var search_input = page_container.find('#search_input');
var search_btn = page_container.find('#search_btn');
var date_start_input = page_container.find('#date_start_input');
var date_end_input = page_container.find('#date_end_input');

var patients_total = page_container.find('#patients_total');
var patients_extra_data_list = page_container.find('#patients_extra_data_list');

var transform_patients_button_toggler = page_container.find('#transform_patients_button_toggler')
var transfer_patients_to_another_center_form = page_container.find('#transfer_patients_to_another_center_form')
var clinicSelect = transfer_patients_to_another_center_form.find('#clinicSelect')

var tableElement5 = page_container.find('#tableElement5');

var patientInfoDiv = page_container.find('#patientInfoDiv');

var contentsWrapper = page_container.find('#contentsWrapper');
var changedSettingsWrapper = page_container.find('#changedSettingsWrapper');
var backBTN = changedSettingsWrapper.find('#backBTN');

var BACK_TO_MAIN_UI_BTN = page_container.find('[data-role="BACK_TO_MAIN_UI_BTN"]');

var wrapper01 = page_container.find('#wrapper01');
var wrapper02 = page_container.find('#wrapper02');
var wrapper03 = page_container.find('#wrapper03');

var patientSettingsAccordion = page_container.find('#patientSettingsAccordion'); 

// init carousel triggers
const DEFAULT_CAROUSEL_TOTAL_PAGES = 7
$('.images-carousel-trigger').each((k,v) =>
{
    var trigger = $(v)
    var trigger_button = trigger.find('#button')
    var total_pages_input = trigger.find('#total_pages')
    var _for = trigger.data('for') 

    trigger_button.off('mouseenter').on('mouseenter', e =>
    {
        e.preventDefault()

        total_pages_input.parent().slideDown(200)
    })

    trigger.off('mouseleave').on('mouseleave', e =>
    {
        total_pages_input.parent().slideUp(200)
    })

    trigger_button.off('click').on('click', async e =>
    {

        var res = await PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: _for
        })
        
        if (res.code == 404) return

        var data = res.data
        var printable_page_html_list = []
        var total_pages = (total_pages_input.val() == '') ? DEFAULT_CAROUSEL_TOTAL_PAGES : total_pages_input.val()

        var images = []
        // extract images
        $.each(data, (k,v) =>
        {
            var url = null

            if ( !v.doc ) return

            images.push({
                url: v.doc.url,
                timestamp: v.infoDate +' '+ v.infoTime
            })
        })
        // create printable page with the extracted images
        var html = ''
        console.log(PatientObject)
        var printable_page = createFakeElement('FAKE_CONTAINER', await (getPage('../views/prints/weight-images-report-page.ejs')) ).find('.weights-images-report-print')

        var pcount = 1
        for (let i = 0; i < images.length; i++) 
        {
            const image = images[i];

            html += `<li>
                        <div class="mb-2 fw-600">${image.timestamp}</div>
                        <div class="">
                            <img src="${image.url}" class="pointer cursor-pointer" data-role="weight_image" alt="">
                        </div>
                    </li>`
            if ( pcount == total_pages || i == images.length-1 )
            {
                printable_page.css('margin', '0 auto')
                printable_page.find('#weight_images_list').html(html)
                printable_page.find('#header_code').html(PatientObject.patientCode)
                printable_page.find('#header_bb').html(PatientObject.patientName)
                printable_page.find('#header_date').html(CURRENT_DATE)
                printable_page_html_list.push( printable_page[0].outerHTML )
                html = ''
                pcount = 0
            }

            pcount++
        }

        // append pages to carousel and display
        var html = ''
        for (let i = 0; i < printable_page_html_list.length; i++) 
        {
            const page_html = printable_page_html_list[i];
            if ( i == 0 )
            {
                html += `<div class="carousel-item active">

                            <div class="mt-5 has-text-centered">
                                <a href="#" class="print-button">${FUI_DISPLAY_LANG.views.pages.global.text2}</a>    
                            </div>
                            
                            ${page_html} 
      
                        </div>`
            }
            else
            {
                html += `<div class="carousel-item">

                            <div class="mt-5 has-text-centered">
                                <a href="#" class="print-button">${FUI_DISPLAY_LANG.views.pages.global.text2}</a>    
                            </div>
                            
                            ${page_html} 
      
                        </div>`
            }
        }

        var carousel_html = `<div id="weight_images_carousel" class="carousel slide" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    ${html}
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#weight_images_carousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#weight_images_carousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>`

        FullpageDialog({
            container: 'weight_carousel_dialog',
            html: carousel_html
        })
        // 
        var weight_images_carousel = $('#weight_images_carousel')
        // print on button click
        weight_images_carousel.find('.print-button').each((k,v) =>
        {
            var print_button = $(v)

            print_button.off('click').on('click', e =>
            {
                e.preventDefault()
                var carousel_item = print_button.closest('.carousel-item')
                var html = carousel_item.find('.weights-images-report-print')[0].outerHTML
                printHTMLToPdf(html, {
                    top: 10000,
                    left: 10000,
                    page: {
                        size: `A5 landscape`,
                        margin: '0 0 -1cm -1cm' 
                    }
                })
            })
            
        })
        // interract with images
        weight_images_carousel.off('click').on('click', e =>
        {
            var target = $(e.target)
            if ( target.data('role') == 'weight_image' )
            {
                var currentImage = target.attr('src')
                var images = $.map( weight_images_carousel.find('[data-role="weight_image"]'), (element, k)  => {
                    const img = $(element)
                    return img.attr('src')
                })
                // add current image to start of array
                images.unshift(currentImage)
                
                CreateImageSliderDialog({
                    images
                })
            }
        })
    })

    total_pages_input.off('keydown').on('keydown', e =>
    {
        if ( e.key == "Enter" )
        {
            trigger_button.trigger('click')
        }
    })
})

var PatientObject = {
    patientId: null
}

filterDateInput.val(CURRENT_DATE);

// show / hide transfer form
transform_patients_button_toggler.on('click', e =>
{
    transfer_patients_to_another_center_form.parent().toggleClass('d-none')
})
// transfer patients form
transfer_patients_to_another_center_form.on('submit', async e =>
{
    e.preventDefault()

    PromptConfirmDialog().then(async c =>
    {
        console.log(getSelectedRows())
        SectionLoader(transfer_patients_to_another_center_form)
        var res = await CLINIC_MODEL.transferPatients({
            clinicId: clinicSelect.find(':selected').val(),
            patients: getSelectedRows()
        })
        
        SectionLoader(transfer_patients_to_another_center_form, '')
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(res.message)    
        search_btn.trigger('click')
    })
})
// back to main ui
BACK_TO_MAIN_UI_BTN.off('click');
BACK_TO_MAIN_UI_BTN.on('click', e =>
{
    wrapper01.slideDown(200).siblings('.WRAPPER').slideUp(200);
});
// tableElement1 click
tableElement1.off('click');
tableElement1.on('click', async e =>
{
    var target = $(e.target);
    if ( target.data('role') == 'UPDATE' )
    {
        var parent = target.closest('[data-role="PATIENT"]')
        var patientId = parent.data('patientid');
        goToPage('create-patients', {
            patientId: patientId
        })
    }
    else if ( target.data('role') == 'PATIENT' )
    {
        var parent = target.closest('[data-role="PATIENT"]')
        parent.addClass('disabled')
        var res = await PATIENT_MODEL.show(parent.data('patientid'))
        parent.removeClass('disabled')
        goToPage('create-patient-medical-data', res.data)
    }
    else if ( target.data('role') == 'patient_medical_data' )
    {
        var parent = target.closest('[data-role="PATIENT"]')
        var res = await PATIENT_MODEL.show(parent.data('patientid'));
        PatientObject = res.data
        // PatientObject.patientId = parent.data('patientid');
        // PatientObject.patientName = parent.data('patient-name');
        // PatientObject.dept = parent.data('dept');
        // PatientObject.hasChronicDisease = parent.closest('[data-role="PATIENT"]').data('has-chronic-disease');
        // PatientObject.hasBloodPressure = parent.closest('[data-role="PATIENT"]').data('has-blood-pressure');
        // PatientObject.hasDiabetes = parent.closest('[data-role="PATIENT"]').data('has-diabetes');
        // wrapper03.slideDown(200).siblings('.WRAPPER').slideUp(200);
        // display patient name
        // wrapper03.find('#patient_name').text(PatientObject.patientName)
        // updateAdditionalSettings();
        // displayCurrentDept()
        goToPage('create-patient-medical-data', PatientObject)
    }
    else if ( target.data('role') == 'view_patient_medical_data' )
    {
        var parent = target.closest('[data-role="PATIENT"]')
        var res = await PATIENT_MODEL.show(parent.data('patientid'));
        PatientObject = res.data
        // PatientObject.patientId = parent.data('patientid');
        // PatientObject.patientName = parent.data('patient-name');
        // PatientObject.dept = parent.data('dept');
        // PatientObject.hasChronicDisease = parent.closest('[data-role="PATIENT"]').data('has-chronic-disease');
        // PatientObject.hasBloodPressure = parent.closest('[data-role="PATIENT"]').data('has-blood-pressure');
        // PatientObject.hasDiabetes = parent.closest('[data-role="PATIENT"]').data('has-diabetes');
        // wrapper03.slideDown(200).siblings('.WRAPPER').slideUp(200);
        // display patient name
        // wrapper03.find('#patient_name').text(PatientObject.patientName)
        // updateAdditionalSettings();
        // displayCurrentDept()
        goToPage('all-patient-medical-data', PatientObject)
    }
    else if ( target.data('role') == 'PRESC_HISTORY' )
    {
        e.preventDefault;

        goToPage('all-prescriptions', {
            query: target.data('name')
        })
    }
    else if ( target.data('role') == 'ADD_PRESC' )
    {
        e.preventDefault;

        var res = await PATIENT_MODEL.show(target.data('id'))

        CreatePrescriptionDialog__Centers(res.data)

    }
    else if ( target.data('role') == 'CREATE_REPORT' )
    {
        var parent = target.closest('[data-role="PATIENT"]')

        goToPage('create-patient-reports', {
            patientId: parent.data('id')
        })
    }
});
// delete
deleteSelectedBTN.off('click');
deleteSelectedBTN.on('click', e =>
{
    PromptConfirmDialog().then(async c =>
    {
        deleteSelectedBTN.addClass('disabled')
        var response = await PATIENT_MODEL.batchDelete( getSelectedRows() )

        deleteSelectedBTN.removeClass('disabled')
        ERROR_BOX.show(0).delay(7*1000).hide(0)
            .find('#text').text(response.message);

        if ( response.code == 404 ) return 

        search_input.trigger('keyup')
    });
});
// search
search_btn.on('click', e =>
{
    search_input.trigger('keyup')
})

detectTypingEnd(search_input, val =>
{
    displayAll({
        method_type: 'hasApt_local_search',
        clinicId: USER_CONFIG.administration.clinicId,
        query: val,
        advanced: {
            start: date_start_input.val(),
            end: date_end_input.val(),
        }
    })
})
// patientInfoDiv
patientInfoDiv.off('click');
patientInfoDiv.on('click', async e =>
{
    var target = $(e.target);
    
    if ( target.data('role') == 'create_patient_medical_data' )
    {
        e.preventDefault;

        goToPage('create-patient-medical-data', PatientObject)
    }
    else if ( target.data('role') == 'view_patient_medical_data' )
    {
        e.preventDefault;

        goToPage('all-patient-medical-data', PatientObject)
    }
    else if ( target.data('role') == 'PRINT_BTN' )
    {
        e.preventDefault;
        var textDir = ( FUI_DISPLAY_LANG.lang == 'ar' ) ? 'rtl' : 'ltr';
        printHTMLToPdf(patientInfoDiv[0].outerHTML, textDir);
    }
});
// search clinics
CLINIC_MODEL.search('').then(response =>
{
    if ( response.code == 200 )
    {
        var data = response.data;
        var html = '';
        $.each(data, (k,v) =>
        {
            html += `<option value="${v.clinicId}">${v.clinicName}</option>`;
        });
        // add html
        clinicSelect.html(html);
    }    
})
// display all
search_input.trigger('keyup')
async function displayAll(params)
{
    // total
    patients_total.text(0)

    patients_extra_data_list.html('')
    tableElement1.html('');
    SectionLoader(tableElement1)
    if ( params.method_type == 'hasApt_local_search' )
        var res = await PATIENT_MODEL.hasApt_local_search(params)

    SectionLoader(tableElement1, '')
    if ( res.code == 404 ) return;

    var data = res.data;
    var html = '';
    var last_data = firstArrayElement(data)
    // total
    patients_total.text(data.length)
    $.each(data, (k,v) =>
    {
        var statusAlertClass = ''

        if ( v.status == 'active' ) statusAlertClass = 'alert-success'
        else if ( v.status == 'inactive' ) statusAlertClass = 'alert-danger'
        else if ( v.status == 'fixed' ) statusAlertClass = 'alert-warning'
        else if ( v.status == 'archive' ) statusAlertClass = 'alert-info'

        html+= `<div class="col-lg-2 col-md-6 col-sm-12">
                    <div class="card hover-shadow" data-role="PATIENT" data-id="${v.patientId}" data-patientid="${v.patientId}" data-patient-name="${v.patientName}" data-has-chronic-disease="${v.hasChronicDisease}" style="cursor: pointer;" data-has-diabetes="${v.hasDiabetes}" data-has-blood-pressure="${v.hasBloodPressure}" data-dept="${v.total_depts}">
                        <div class="py-2 mb-2">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" data-role="CHECK" data-patientid="${v.patientId}" value="" id="flexCheckDefault_${v.patientId}">
                                <label class="form-check-label" for="flexCheckDefault_${v.patientId}">
                                    ${FUI_DISPLAY_LANG.views.pages.global.select}
                                </label>
                            </div>
                        </div>
                        <div class="card-body no-pointer">
                            <div class="h5">${v.patientName}</div>
                            <div class="text-02">${v.patientPhone}</div>
                            <div class="text-04" data-perm="view_patient_depts">${FUI_DISPLAY_LANG.views.pages.global.text21}: <span class="text-success">${moneyFormat(v.total_depts)}</span></div>
                            <div class="has-text-centered mt-2" data-perm="view_patient_status">
                                <div class="alert ${statusAlertClass} alert-1">
                                    ${ FUI_DISPLAY_LANG.views.pages.global.patient_status[v.status] }
                                </div>    
                            </div>
                        </div>
                        <div class="py-2">
                            <a class="d-inline-block mx-2 text-dark" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                ${FUI_DISPLAY_LANG.views.pages.global.more}
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#" class="dropdown-item" data-role="PRINT_CARD" data-perm="print_patient_card" data-name="${v.patientName}" data-id="${v.patientId}" data-password="${v.patientPass}" data-phone="${v.patientPhone}" data-birth-date="${v.patientBirthDate}" data-center-name="${v.clinicName}" data-qrcode="${v.patientQRCode}">${FUI_DISPLAY_LANG.views.pages.global.print_}</a>
                                </li>
                                <li>
                                    <a href="#" class="dropdown-item" data-role="patient_medical_data" data-perm="patient_medical_data" data-patientid="${v.patientId}">${FUI_DISPLAY_LANG.views.pages.global.create_or_view_more_data}</a>
                                </li>
                                <li>
                                    <a href="#" class="dropdown-item" data-role="ADD_APT" data-perm="create_patient_private_appointment" data-name="${v.patientName}" data-id="${v.patientId}">${FUI_DISPLAY_LANG.views.pages.global.text32}</a>
                                </li>
                                <li>
                                    <a href="#" class="dropdown-item" data-role="ADD_PRESC" data-perm="create_patient_prescription" data-name="${v.patientName}" data-id="${v.patientId}">${FUI_DISPLAY_LANG.views.pages.global.text34}</a>
                                </li>
                            </ul>
                            <a href="#" class="d-inline-block text-dark" data-role="UPDATE" data-perm="update_patient" data-patientid="${v.patientId}">
                                <i class="fas fa-edit no-pointer"></i>
                            </a>
                        </div>
                    </div>
                </div>PAG_SEP`;
        
    });
    // add html
    var options = {
        data: html.split('PAG_SEP'),
        resultsPerPage: 9
    };
    new SmoothPagination(pagination1, tableElement1, options);
    // extra data
    patients_extra_data_list.html(`
        <li class="list-group-item">
            <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text36 }: </span>
            <span>${FUI_DISPLAY_LANG.views.pages.global.for_} </span>
            <span>${last_data.patientName}, </span>
            <span class="text-primary">${last_data.patientDate} ${last_data.patientTime}</span> 
        </li>
        <li class="list-group-item">
            <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text42 }: </span>
            <span>${ (last_data.signup_reason) ?? '' } </span>
        </li>
    `)
}
// display info
async function displayInfo()
{
    // display loader
    SectionLoader(wrapper02);
    wrapper02.slideDown(200).siblings('.WRAPPER').slideUp(200);
    var response = await PATIENT_MODEL.show(PatientObject.patientId);
    // hide loader
    SectionLoader(wrapper02, '');
    // clear html
    patientInfoDiv.html('');
    if ( response.code == 404 )
        return;

    var data = response.data;
    var html = '';
    var hasDiabetes = (data.hasDiabetes == ST_NO) ? 'لا' : 'نعم';
    var hasBloodPressure = (data.hasBloodPressure == ST_NO) ? 'لا' : 'نعم';
    var hasChronicDisease = (data.hasChronicDisease == ST_NO) ? 'لا' : 'نعم';
    var chronicDiseasesString = (data.chronicDiseases) ? $.map(data.chronicDiseases, (v, k) => { return v.name  }).toString() : null

    html = `<div class="col-lg-12 col-md-12 col-sm-12 py-2 border-bottom">
                <div class="row gx-4 gy-3">
                        <div class="col-md-6 col-sm-12">
                            <div class="d-inline-flex flex-align-center w-100 h-100">
                                <div>
                                    <div class="h5">${data.patientName}</div>
                                    <div class="text-02 text-muted">(${data.patientPhone})</div>
                                    <div class="text-02 mt-2">
                                        <a href="#" class="" data-role="PRINT_BTN">
                                            ${FUI_DISPLAY_LANG.views.pages.global.print_}
                                        </a>
                                    </div>
                                </div>	
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="d-inline-flex flex-center w-100 h-100">
                                <img src="${data.patientQRCode}" class="img-03 img-thumbnail" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label3}: </span>
                        <span class="text-04">${data.patientPass}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label56}: </span>
                        <span class="text-04">${data.patientAge}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label57}: </span>
                        <span class="text-04">${data.patientGender}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label50}: </span>
                        <span class="text-04">${data.patientAddress}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label58}: </span>
                        <span class="text-04">${data.patientState}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label59}: </span>
                        <span class="text-04">${data.patientChildren}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label60}: </span>
                        <span class="text-04">${data.patientBirthDate} - ${data.patientBirthPlace}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label61}: </span>
                        <span class="text-04">${hasDiabetes}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label62}: </span>
                        <span class="text-04">${hasBloodPressure}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label63}: </span>
                        <span class="text-04">${hasChronicDisease}</span>
                        ${ (chronicDiseasesString) ? `: <span class="text-04 alert alert-info alert-1">${chronicDiseasesString}</span>` : '' }
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label64}: </span>
                        <span class="text-04">${data.patientWhatsapp}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label65}: </span>
                        <span class="text-04">${data.patientFB}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label66}: </span>
                        <span class="text-04">${data.patientTelegram}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label67}: </span>
                        <span class="text-04">${data.patientJob}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label68}: </span>
                        <span class="text-04">${data.studyLevel}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label69}: </span>
                        <span class="text-04">${data.patientGroup}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label70}: </span>
                        <span class="text-04">${data.height}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label71}: </span>
                        <span class="text-04">${data.weight}</span>
                    </div>
                    <div class="">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label72}: </span>
                        <span class="text-04">${data.best_weight}</span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 py-2 border-bottom">
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label73}: </span>
                        <span class="text-04">${data.signup_reason}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-01">${FUI_DISPLAY_LANG.views.pages.global.label74}: </span>
                        <span class="text-04">${data.title}</span>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 py-2 border-bottom">
                    <a href="#" data-role="create_patient_medical_data">${FUI_DISPLAY_LANG.views.pages.global.create_more_data}</a>
                    <span> | </span>
                    <a href="#" data-role="view_patient_medical_data">${FUI_DISPLAY_LANG.views.pages.global.view_more_data}</a>
                </div>
            </div>`;	

    patientInfoDiv.html(html);

    // Products Invoices
    products_invoices = page_container.find('#products_invoices')
    products_invoices_search_btn = products_invoices.find('#products_invoices_search_btn')
    products_invoices_search_input = products_invoices.find('#products_invoices_search_input')
    products_invoices_date_start_input = products_invoices.find('#products_invoices_date_start_input')
    products_invoices_date_end_input = products_invoices.find('#products_invoices_date_end_input')
    products_invoices_pagination = products_invoices.find('#products_invoices_pagination')
    products_invoices_tableElement = products_invoices.find('#products_invoices_tableElement')

    products_invoices_date_start_input.val( CURRENT_DATE )
    products_invoices_date_end_input.val( CURRENT_DATE )

    products_invoices_tableElement.off('click')
    products_invoices_tableElement.on('click', async e =>
    {
        var target = $(e.target);
        if ( target[0].nodeName == 'TD' )
        {
            var parent = target.closest('tr');
            var nextTR = parent.next();
            nextTR.slideToggle(200)
            parent.toggleClass('expanded');
        }
    })
    // search between dates
    products_invoices_search_btn.off('click').on('click', async e =>
    {
        displayAllProductsInvoices({
            method_type: 'direction_center_to_client_selling__client_local_search',
            user_id: PatientObject.patientId,
            query: products_invoices_search_input.val(),
            advanced: {
                start: products_invoices_date_start_input.val(),
                end: products_invoices_date_start_input.val(),
            }
        })
    });
    // search
    products_invoices_search_input.off('keyup').on('keyup', async e =>
    {
        displayAllProductsInvoices({
            method_type: 'direction_center_to_client_selling__client_local_search',
            user_id: PatientObject.patientId,
            query: products_invoices_search_input.val()
        })
    });
    // display all
    displayAllProductsInvoices({
        method_type: 'direction_center_to_client_selling__client_local_search',
        user_id: PatientObject.patientId,
        query: products_invoices_search_input.val()
    })
    async function displayAllProductsInvoices(params)
    {
        products_invoices_tableElement.find('tbody').html('');
        SectionLoader(products_invoices_tableElement)
        if ( params.method_type == 'direction_center_to_client_selling__client_local_search' )
            var res = await ORDER_MODEL.direction_center_to_client_selling__client_local_search(params)

        SectionLoader(products_invoices_tableElement, '')
        if ( res.code == 404 )
        {
            // hide wrapper
            products_invoices.addClass('d-none')
            return
        }
        // show wrapper
        products_invoices.removeClass('d-none')
        var data = res.data;
        var html = '';
        for (var i = 0; i < data.length; i++) 
        {
            var order = data[i];
            // loop items
            if ( order.order_items )
            {
                var itemsHTML = '<ul class="list-group list-group-flush list-group-numbered">';
                var itemsHTML2 = '';
                var order_item_dept_rate = 0.00;
                var order_item_price = 0.00;
                for (var j = 0; j < order.order_items.length; j++) 
                {
                    var item = order.order_items[j];
                    order_item_dept_rate += parseFloat(item.item_dept.order_item_dept_rate);
                    order_item_price += parseFloat(item.order_item_price);
                    itemsHTML += `<li class="list-group-item text-04">${item.item_name}</li>`;
                    itemsHTML2 += `<tr>
                                    <td>${item.item_name}</td>
                                    <td>${item.order_item_quantity}</td>
                                    <td>${item.order_item_price}</td>
                                    <td>${item.order_item_final_amount}</td>
                                    </tr>`;
                }
                itemsHTML += '</ul>';
            }

            html += `<tr class="expand-row">
                        <td>
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK" data-orderid="${order.order_id}">
                        </td>
                        <td>${order.order_hash}</td>
                        <td>${order.order_date}|${order.order_time}</td>
                        <td>${order.order_total_amount}</td>
                        <td>${order.order_amount_paid}</td>
                        <td>${order.order_receiver_name}</td>
                        <td style="width:15px">
                            <svg part="svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" aria-labelledby="ic-caret-up" focusable="false" viewBox="0 0 24 24" class="expand-icon" dataV17f0a767=""><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z"></path></g></svg>
                        </td>
                    </tr>PAG_SEP
                    <tr class="expand-row__row" style="display:none;">
                        <td colspan="10">
                            <table class="table-01">
                                <thead>
                                    <tr>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th26}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th27}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th28}</th>
                                        <th>${FUI_DISPLAY_LANG.views.pages.global.th29}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${itemsHTML2}
                                </tbody>
                            </table>
                            <div class="order-price-table">
                                <div class="order-price-table-contents">
                                    ${itemsHTML}	
                                </div>
                                <div class="order-price-table-contents">
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th30}</strong>
                                        <span>${parseFloat(order.order_total_amount).toFixed(2)}</span>
                                    </div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th31}</strong>
                                        <span>${parseFloat(order.order_dept_amount).toFixed(2)}</span>
                                    </div>
                                    <div class="border-top my-1"></div>
                                    <div class="order-price-table-td">
                                        <strong>${FUI_DISPLAY_LANG.views.pages.global.th32}</strong>
                                        <span>${parseFloat(order.order_amount_paid).toFixed(2)}</span>
                                    </div>	
                                </div>
                            </div>
                        </td>
                    </tr>PAG_SEP`;	
        }
        // add html
        new SmoothPagination(products_invoices_pagination, products_invoices_tableElement.find('tbody'), {
            data: html.split('PAG_SEP'),
            resultsPerPage: 6
        });
    }
    
    // Dept actions
    dept_actions = page_container.find('#dept_actions')
    dept_actions_search_btn = dept_actions.find('#dept_actions_search_btn')
    dept_actions_search_input = dept_actions.find('#dept_actions_search_input')
    dept_actions_date_start_input = dept_actions.find('#dept_actions_date_start_input')
    dept_actions_date_end_input = dept_actions.find('#dept_actions_date_end_input')
    dept_actions_pagination = dept_actions.find('#dept_actions_pagination')
    dept_actions_tableElement = dept_actions.find('#dept_actions_tableElement')

    var total_depts = page_container.find('#total_depts');
    var dept_actions_extra_data_list = page_container.find('#dept_actions_extra_data_list');

    dept_actions_date_start_input.val( CURRENT_DATE )
    dept_actions_date_end_input.val( CURRENT_DATE )

    // search between dates
    dept_actions_search_btn.off('click').on('click', async e =>
    {
        displayAllDeptActions({
            method_type: 'dept_action_local_search',
            patientId: PatientObject.patientId,
            query: dept_actions_search_input.val(),
            advanced: {
                start: dept_actions_date_start_input.val(),
                end: dept_actions_date_end_input.val(),
            }
        })
    });
    // search
    dept_actions_search_input.off('keyup').on('keyup', async e =>
    {
        displayAllDeptActions({
            method_type: 'dept_action_local_search',
            patientId: PatientObject.patientId,
            query: dept_actions_search_input.val()
        })
    });
    // display all
    displayAllDeptActions({
        method_type: 'dept_action_local_search',
        patientId: PatientObject.patientId,
        query: dept_actions_search_input.val()
    })
    async function displayAllDeptActions(params)
    {
        // total_depts
        total_depts.text(moneyFormat(PatientObject.total_depts)).data('total', PatientObject.total_depts).attr('data-total', PatientObject.total_depts)
        //
        dept_actions_extra_data_list.html('')
        dept_actions_tableElement.find('.tbody').html('');
        SectionLoader(dept_actions_tableElement)
        if ( params.method_type == 'dept_action_local_search' )
            var res = await PATIENT_MODEL.dept_action_local_search(params)

        SectionLoader(dept_actions_tableElement, '')
        if ( res.code == 404 )
        {
            // hide wrapper
            dept_actions.addClass('d-none')
            return
        }
        // show wrapper
        dept_actions.removeClass('d-none')
        var data = res.data;
        var html = '';
        var in_amount_total = 0
        var out_amount_total = 0
        var last_data = firstArrayElement(data)
        $.each(data, (k,v) =>
        {
            in_amount_total += parseFloat(v.in_amount)
            out_amount_total += parseFloat(v.out_amount)

            html+= `<div class="tr" data-role="row" data-id="${v.id}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">${v.patientName}</div>
                        <div class="td">${v.reason}</div>
                        <div class="td">${v.note}</div>
                        <div class="td">
                            (<span class="text-success">${ (v.in_amount > 0) ? '+'+moneyFormat(v.in_amount) : '0.00' }</span>)
                        </div>
                        <div class="td">
                            (<span class="text-danger">${ (v.out_amount > 0) ? '-'+moneyFormat(v.out_amount) : '0.00' }</span>)
                        </div>
                        <div class="td">${v.created_at}</div>
                    </div>PAG_SEP`
        })
        // add html
        new SmoothPagination(dept_actions_pagination, dept_actions_tableElement.find('.tbody'), {
            data: html.split('PAG_SEP'),
            resultsPerPage: 6
        });
        // display extra data
        var last_amount = (last_data.in_amount > 0) ? `(<span class="text-success">+${moneyFormat(last_data.in_amount)}</span>)` : `(<span class="text-danger">-${moneyFormat(last_data.out_amount)}</span>)`
        dept_actions_extra_data_list.html(`
            <li class="list-group-item"><span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text24 }:</span> (<span class="text-success">${ (in_amount_total > 0) ? '+'+moneyFormat(in_amount_total) : '0.00' }</span>)</li>
            <li class="list-group-item"><span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text25 }:</span> (<span class="text-danger">${ (out_amount_total > 0) ? '-'+moneyFormat(out_amount_total) : '0.00' }</span>)</li>
            <li class="list-group-item">
                <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text26 }: </span>
                ${ FUI_DISPLAY_LANG.views.pages.global.text28 } ${last_amount}, 
                ${ FUI_DISPLAY_LANG.views.pages.global.in_date } <span class="text-primary">${last_data.created_at}</span>
            </li>
        `)
    }
    // Prescriptions history
    prescriptions_history = page_container.find('#prescriptions_history')
    prescriptions_history_search_btn = prescriptions_history.find('#prescriptions_history_search_btn')
    prescriptions_history_search_input = prescriptions_history.find('#prescriptions_history_search_input')
    prescriptions_history_date_start_input = prescriptions_history.find('#prescriptions_history_date_start_input')
    prescriptions_history_date_end_input = prescriptions_history.find('#prescriptions_history_date_end_input')
    prescriptions_history_pagination = prescriptions_history.find('#prescriptions_history_pagination')
    prescriptions_history_tableElement = prescriptions_history.find('#prescriptions_history_tableElement')

    var prescriptions_history_total = page_container.find('#prescriptions_history_total');
    var prescriptions_history_extra_data_list = page_container.find('#prescriptions_history_extra_data_list');

    prescriptions_history_date_start_input.val( CURRENT_DATE )
    prescriptions_history_date_end_input.val( CURRENT_DATE )

    // search between dates
    prescriptions_history_search_btn.off('click').on('click', async e =>
    {
        displayAllPrescriptionsHistory({
            method_type: 'patient_local_search',
            patientId: PatientObject.patientId,
            query: prescriptions_history_search_input.val(),
            advanced: {
                start: prescriptions_history_date_start_input.val(),
                end: prescriptions_history_date_end_input.val(),
            }
        })
    });
    // search
    prescriptions_history_search_input.off('keyup').on('keyup', async e =>
    {
        displayAllPrescriptionsHistory({
            method_type: 'patient_local_search',
            patientId: PatientObject.patientId,
            query: prescriptions_history_search_input.val()
        })
    });
    // display all
    displayAllPrescriptionsHistory({
        method_type: 'patient_local_search',
        patientId: PatientObject.patientId,
        query: prescriptions_history_search_input.val()
    })
    async function displayAllPrescriptionsHistory(params)
    {
        // total_depts
        prescriptions_history_total.text(0).data('total', 0).attr('data-total', 0)
        //
        prescriptions_history_extra_data_list.html('')
        prescriptions_history_tableElement.find('.tbody').html('');
        SectionLoader(prescriptions_history_tableElement)
        if ( params.method_type == 'patient_local_search' )
            var res = await PRESCRIPTION_MODEL.patient_local_search(params)

        SectionLoader(prescriptions_history_tableElement, '')
        if ( res.code == 404 )
        {
            // hide wrapper
            prescriptions_history.addClass('d-none')
            return
        }
        // show wrapper
        prescriptions_history.removeClass('d-none')
        var data = res.data;
        var html = '';
        var total = data.length
        // display total
        prescriptions_history_total.text(total)

        var last_data = firstArrayElement(data)
        $.each(data, (k,v) =>
        {
            var medicines = (v.medicines) ? v.medicines.length : 0;
            var medicines_list = ''

            if ( v.medicines )
            {
                for (let i = 0; i < v.medicines.length; i++)
                {
                    const medicine = v.medicines[i];
                    medicines_list += `<li class="list-group-item">${medicine.medName}</li>`
                }
            }

            html+= `<div class="tr" data-role="row" data-id="${v.prescriptionId}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.patientName}</div>
                            <div class="">${v.patientPhone}</div>
                        </div>
                        <div class="td">
                            ${v.clinicName}
                        </div>
                        <div class="td">
                            ${v.employee_name}
                        </div>
                        <div class="td">
                            <div class="text-04 mb-2">${FUI_DISPLAY_LANG.views.pages.global.attributes.medicines}: (${medicines})</div>
                            <div class="">
                                <ul class="list-group list-group-flush overflow-x-hidden overflow-y-auto max-height-100px pointer">
                                    ${medicines_list}
                                </ul>
                            </div>
                        </div>
                        <div class="td">
                            ${v.prescriptionDate} ${v.prescriptionTime} 
                        </div>
                    </div>PAG_SEP`
        })
        // add html
        new SmoothPagination(prescriptions_history_pagination, prescriptions_history_tableElement.find('.tbody'), {
            data: html.split('PAG_SEP'),
            resultsPerPage: 6
        });
        // display extra data
        prescriptions_history_extra_data_list.html(`
            <li class="list-group-item">
                <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text36 }: </span>
                ${ FUI_DISPLAY_LANG.views.pages.global.created_by } ${last_data.employee_name}, 
                ${ FUI_DISPLAY_LANG.views.pages.global.in_date } <span class="text-primary">${last_data.prescriptionDate} ${last_data.prescriptionTime}</span>
            </li>
        `)
    }
    // Consommables history
    consommables_history = page_container.find('#consommables_history')
    consommables_history_search_btn = consommables_history.find('#consommables_history_search_btn')
    consommables_history_search_input = consommables_history.find('#consommables_history_search_input')
    consommables_history_date_start_input = consommables_history.find('#consommables_history_date_start_input')
    consommables_history_date_end_input = consommables_history.find('#consommables_history_date_end_input')
    consommables_history_pagination = consommables_history.find('#consommables_history_pagination')
    consommables_history_tableElement = consommables_history.find('#consommables_history_tableElement')

    var consommables_history_total = page_container.find('#consommables_history_total');
    var consommables_history_extra_data_list = page_container.find('#consommables_history_extra_data_list');

    consommables_history_date_start_input.val( CURRENT_DATE )
    consommables_history_date_end_input.val( CURRENT_DATE )

    // search between dates
    consommables_history_search_btn.off('click').on('click', async e =>
    {
        displayAllConsommablesHistory({
            method_type: 'patient_local_search',
            patientId: PatientObject.patientId,
            query: consommables_history_search_input.val(),
            advanced: {
                start: consommables_history_date_start_input.val(),
                end: consommables_history_date_end_input.val(),
            }
        })
    });
    // search
    consommables_history_search_input.off('keyup').on('keyup', async e =>
    {
        displayAllConsommablesHistory({
            method_type: 'patient_local_search',
            patientId: PatientObject.patientId,
            query: consommables_history_search_input.val()
        })
    });
    // display all
    displayAllConsommablesHistory({
        method_type: 'patient_local_search',
        patientId: PatientObject.patientId,
        query: consommables_history_search_input.val()
    })
    async function displayAllConsommablesHistory(params)
    {
        // total_depts
        consommables_history_total.text(0).data('total', 0).attr('data-total', 0)
        //
        consommables_history_extra_data_list.html('')
        consommables_history_tableElement.find('.tbody').html('');
        SectionLoader(consommables_history_tableElement)
        if ( params.method_type == 'patient_local_search' )
            var res = await CONSOMMABLE_MODEL.patient_local_search(params)

        SectionLoader(consommables_history_tableElement, '')
        if ( res.code == 404 )
        {
            // hide wrapper
            consommables_history.addClass('d-none')
            return
        }
        // show wrapper
        consommables_history.removeClass('d-none')
        var data = res.data;
        var html = '';
        var quantity_total = 0
        var last_data = firstArrayElement(data)
        $.each(data, (k,v) =>
        {
            quantity_total += parseInt(v.consommable_quantity)

            html+= `<div class="tr" data-role="row" data-id="${v.id}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">
                            <div class="">${v.patientName}</div>
                        </div>
                        <div class="td">
                            ${v.administration_name}
                        </div>
                        <div class="td">
                            <div class="mb-2">${v.consommable_code}</div>
                            <div class="">${v.consommable_name}</div>
                        </div>
                        <div class="td">
                            (<span class="text-success">${v.consommable_quantity}</span>)
                        </div>
                        <div class="td">
                            ${v.created_at}
                        </div>
                    </div>PAG_SEP`
        })
        // add html
        new SmoothPagination(consommables_history_pagination, consommables_history_tableElement.find('.tbody'), {
            data: html.split('PAG_SEP'),
            resultsPerPage: 6
        });
        // display extra data
        consommables_history_total.text(quantity_total)
        consommables_history_extra_data_list.html(`
            <li class="list-group-item">
                <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text36 }: </span>
                ${ FUI_DISPLAY_LANG.views.pages.global.created_by } ${last_data.employee_name}, 
                ${ FUI_DISPLAY_LANG.views.pages.global.in_date } <span class="text-primary">${last_data.created_at}</span>
            </li>
        `)
    }

    // Appointments History
    appointments_history = page_container.find('#appointments_history')
    appointments_history_search_btn = appointments_history.find('#appointments_history_search_btn')
    appointments_history_search_input = appointments_history.find('#appointments_history_search_input')
    appointments_history_date_start_input = appointments_history.find('#appointments_history_date_start_input')
    appointments_history_date_end_input = appointments_history.find('#appointments_history_date_end_input')
    appointments_history_pagination = appointments_history.find('#appointments_history_pagination')
    appointments_history_tableElement = appointments_history.find('#appointments_history_tableElement')

    var appointments_history_total = page_container.find('#appointments_history_total');
    var appointments_history_extra_data_list = page_container.find('#appointments_history_extra_data_list');

    appointments_history_date_start_input.val( CURRENT_DATE )
    appointments_history_date_end_input.val( CURRENT_DATE )

    // search between dates
    appointments_history_search_btn.off('click').on('click', async e =>
    {
        displayAllAppointmentsHistory({
            method_type: 'private_patient_search',
            patientId: PatientObject.patientId,
            query: appointments_history_search_input.val(),
            advanced: {
                start: appointments_history_date_start_input.val(),
                end: appointments_history_date_end_input.val(),
            }
        })
    });
    // search
    appointments_history_search_input.off('keyup').on('keyup', async e =>
    {
        displayAllAppointmentsHistory({
            method_type: 'private_patient_search',
            patientId: PatientObject.patientId,
            query: appointments_history_search_input.val()
        })
    });
    // display all
    displayAllAppointmentsHistory({
        method_type: 'private_patient_search',
        patientId: PatientObject.patientId,
        query: appointments_history_search_input.val()
    })

    async function displayAllAppointmentsHistory(params)
    {
        // total
        appointments_history_total.text(0)
        //
        appointments_history_extra_data_list.html('')
        appointments_history_tableElement.find('.tbody').html('');
        SectionLoader(appointments_history_tableElement)
        if ( params.method_type == 'private_patient_search' )
            var res = await APPOINTMENT_MODEL.private_patient_search(params)

        SectionLoader(appointments_history_tableElement, '')
        if ( res.code == 404 )
        {
            // hide wrapper
            appointments_history.addClass('d-none')
            return
        }
        // show wrapper
        appointments_history.removeClass('d-none')
        var data = res.data;
        var html = '';
        var last_data = firstArrayElement(data)
        appointments_history_total.text(data.length)
        $.each(data, (k,v) =>
        {
            html += `<div class="tr" data-role="row" data-aptid="${v.aptId}" data-patient-id="${v.patientId}" data-patient-name="${v.patientName}" data-special_case_id="${v.special_case_id}" data-employee_id="${v.employee_id}">
                        <div class="td">
                            <input type="checkbox" class="form-check-input pointer" data-role="CHECK">
                        </div>
                        <div class="td">
                            <div>${v.aptName}</div>
                        </div>
                        <div class="td">${v.className}</div>
                        <div class="td" data-perm="view_patient_appointment_price">${v.aptPrice}</div>
                        <div class="td">
                            <div>${v.patientName}</div>
                            <div class="text-muted text-04">(${v.patientPhone})</div>
                        </div>
                        <div class="td">${v.aptNote}</div>
                        <div class="td">
                            <div>${v.aptDate} ${v.aptTime}</div>
                        </div>
                    </div>PAG_SEP`
        })
        // add html
        new SmoothPagination(appointments_history_pagination, appointments_history_tableElement.find('.tbody'), {
            data: html.split('PAG_SEP'),
            resultsPerPage: 6
        });
       // display extra data
       appointments_history_extra_data_list.html(`
            <li class="list-group-item">
                <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text36 }: </span>
                <span>${FUI_DISPLAY_LANG.views.pages.global.for_} </span>
                <span>${last_data.patientName}, </span>
                <span class="text-primary">${last_data.aptDate} ${last_data.aptTime}</span> 
            </li>
            <li class="list-group-item">
                <span class="fw-500">${ FUI_DISPLAY_LANG.views.pages.global.text39 }: </span>
                <span>${last_data.aptNote} </span>
            </li>
        `)
    }

}

// get selected
function getSelectedRows()
{
    var list = [];
    var checks = tableElement1.find('[data-role="CHECK"]');
    for (var i = 0; i < checks.length; i++) 
    {
        var check = $(checks[i]);
        if ( check.is(':checked') )
            list.push({ patientId: check.data('patientid') });
    }

    return list;
}
// update additional settings
function updateAdditionalSettings()
{
    // blood pressure
    var collapseOne = page_container.find('#collapseOne');
    var pagination0 = collapseOne.find('#pagination0');
    var tableElement0 = collapseOne.find('#tableElement0');

    if ( PatientObject.hasBloodPressure == ST_NO )
        tableElement0.closest('.accordion-item').addClass('disabled');

    // tableElement click
    tableElement0.off('click');
    tableElement0.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseOne.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'blood_pressure'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseOne.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayBloodPressure();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseOne
    collapseOne.off('shown.bs.collapse');
    collapseOne.on('shown.bs.collapse', e =>
    {
        displayBloodPressure();
    });
    //collapseOne.trigger('shown.bs.collapse');

    // display blood pressure
    function displayBloodPressure()
    {
        // display blood pressure
        SectionLoader(collapseOne.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'blood_pressure'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseOne.find('.accordion-body'), '');
            // clear html
            tableElement0.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.blood_pressure}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination0, tableElement0.find('.tbody'), options);
        });
    }
    // diabetes
    var collapseTwo = page_container.find('#collapseTwo');
    var pagination2 = collapseTwo.find('#pagination2');
    var tableElement2 = collapseTwo.find('#tableElement2');

    if ( PatientObject.hasDiabetes == ST_NO )
        tableElement2.closest('.accordion-item').addClass('disabled');

    // tableElement click
    tableElement2.off('click');
    tableElement2.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseTwo.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'diabetes'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseTwo.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayDiabetes();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseTwo
    collapseTwo.off('shown.bs.collapse');
    collapseTwo.on('shown.bs.collapse', e =>
    {
        displayDiabetes();
    });

    // display diabetes
    function displayDiabetes()
    {
        // display blood pressure
        SectionLoader(collapseTwo.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'diabetes'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseTwo.find('.accordion-body'), '');
            // clear html
            tableElement2.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {

                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.diabetes}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination2, tableElement2.find('.tbody'), options);
        });
    }
    // weight
    var collapseThree = page_container.find('#collapseThree');
    var pagination3 = collapseThree.find('#pagination3');
    var tableElement3 = collapseThree.find('#tableElement3');

    // tableElement click
    tableElement3.off('click');
    tableElement3.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseThree.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'weight'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseThree.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayWeight();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseThree
    collapseThree.off('shown.bs.collapse');
    collapseThree.on('shown.bs.collapse', e =>
    {
        displayWeight();
    });

    // display weight
    function displayWeight()
    {
        // display blood pressure
        SectionLoader(collapseThree.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'weight'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseThree.find('.accordion-body'), '');
            // clear html
            tableElement3.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.weight}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination3, tableElement3.find('.tbody'), options);
        });
    }
    // abdominal_circumference
    var collapseFour = page_container.find('#collapseFour');
    var pagination4 = collapseFour.find('#pagination4');
    var tableElement4 = collapseFour.find('#tableElement4');

    // tableElement click
    tableElement4.off('click');
    tableElement4.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseFour.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'abdominal_circumference'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseFour.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayAbdominal_circumference();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseFour
    collapseFour.off('shown.bs.collapse');
    collapseFour.on('shown.bs.collapse', e =>
    {
        displayAbdominal_circumference();
    });

    // display abdominal_circumference
    function displayAbdominal_circumference()
    {
        // 
        SectionLoader(collapseFour.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'abdominal_circumference'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseFour.find('.accordion-body'), '');
            // clear html
            tableElement4.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.abdominal_circumference}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination4, tableElement4.find('.tbody'), options);
        });
    }
    // chest_circumference
    var collapseNine = page_container.find('#collapseNine');
    var pagination6 = collapseNine.find('#pagination6');
    var tableElement6 = collapseNine.find('#tableElement6');
    // tableElement click
    tableElement6.off('click');
    tableElement6.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseNine.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'chest_circumference'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseNine.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayChest_circumference();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseNine
    collapseNine.off('shown.bs.collapse');
    collapseNine.on('shown.bs.collapse', e =>
    {
        displayChest_circumference();
    });
    // display chest_circumference
    function displayChest_circumference()
    {
        // 
        SectionLoader(collapseNine.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'chest_circumference'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseNine.find('.accordion-body'), '');
            // clear html
            tableElement6.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.chest_circumference}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination6, tableElement6.find('.tbody'), options);
        });
    }
    // arms_circumference
    var collapseTen = page_container.find('#collapseTen');
    var pagination7 = collapseTen.find('#pagination7');
    var tableElement7 = collapseTen.find('#tableElement7');
    // tableElement click
    tableElement6.off('click');
    tableElement6.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseTen.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'arms_circumference'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseTen.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayArms_circumference();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseTen
    collapseTen.off('shown.bs.collapse');
    collapseTen.on('shown.bs.collapse', e =>
    {
        displayArms_circumference();
    });
    // display arms_circumference
    function displayArms_circumference()
    {
        // 
        SectionLoader(collapseTen.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'arms_circumference'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseTen.find('.accordion-body'), '');
            // clear html
            tableElement7.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.arms_circumference}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination7, tableElement7.find('.tbody'), options);
        });
    }
    // insulin
    var collapseEight = page_container.find('#collapseEight');
    var pagination5 = collapseEight.find('#pagination5');
    var tableElement5 = collapseEight.find('#tableElement5');
    // tableElement click
    tableElement5.off('click');
    tableElement5.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapseEight.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'insulin'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapseEight.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayInsulin();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapseEight
    collapseEight.off('shown.bs.collapse');
    collapseEight.on('shown.bs.collapse', e =>
    {
        displayInsulin();
    });
    // display insulin
    function displayInsulin()
    {
        // 
        SectionLoader(collapseEight.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'insulin'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapseEight.find('.accordion-body'), '');
            // clear html
            tableElement5.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.insulin}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination5, tableElement5.find('.tbody'), options);
        });
    }
    // TSH
    var collapse11 = page_container.find('#collapse11');
    var pagination8 = collapse11.find('#pagination8');
    var tableElement8 = collapse11.find('#tableElement8');
    // tableElement click
    tableElement8.off('click');
    tableElement8.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapse11.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'TSH'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapse11.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayTSH();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse11
    collapse11.off('shown.bs.collapse');
    collapse11.on('shown.bs.collapse', e =>
    {
        displayTSH();
    });
    // display TSH
    function displayTSH()
    {
        // 
        SectionLoader(collapse11.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'TSH'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapse11.find('.accordion-body'), '');
            // clear html
            tableElement8.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.TSH}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination8, tableElement8.find('.tbody'), options);
        });
    }
    // HBA1c
    var collapse12 = page_container.find('#collapse12');
    var pagination9 = collapse12.find('#pagination9');
    var tableElement9 = collapse12.find('#tableElement9');
    // tableElement click
    tableElement9.off('click');
    tableElement9.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapse12.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'HBA1c'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapse12.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayHBA1c();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse12
    collapse12.off('shown.bs.collapse');
    collapse12.on('shown.bs.collapse', e =>
    {
        displayHBA1c();
    });
    // display HBA1c
    function displayHBA1c()
    {
        // 
        SectionLoader(collapse12.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'HBA1c'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapse12.find('.accordion-body'), '');
            // clear html
            tableElement9.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.HBA1c}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination9, tableElement9.find('.tbody'), options);
        });
    }
    // VS
    var collapse13 = page_container.find('#collapse13');
    var pagination10 = collapse13.find('#pagination10');
    var tableElement10 = collapse13.find('#tableElement10');
    // tableElement click
    tableElement10.off('click');
    tableElement10.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapse13.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'VS'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapse13.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayVS();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse13
    collapse13.off('shown.bs.collapse');
    collapse13.on('shown.bs.collapse', e =>
    {
        displayVS();
    });
    // display VS
    function displayVS()
    {
        // 
        SectionLoader(collapse13.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'VS'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapse13.find('.accordion-body'), '');
            // clear html
            tableElement10.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.VS}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination10, tableElement10.find('.tbody'), options);
        });
    }
    // CRP
    var collapse14 = page_container.find('#collapse14');
    var pagination11 = collapse14.find('#pagination11');
    var tableElement11 = collapse14.find('#tableElement11');
    // tableElement click
    tableElement11.off('click');
    tableElement11.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(c =>
            {
                // display loader
                SectionLoader(collapse14.find('.accordion-body'));
                PATIENT_MODEL.deleteChangedSetting({
                    id: target.data('id'),
                    column: 'CRP'
                }).then(response =>
                {
                    // hide loader
                    SectionLoader(collapse14.find('.accordion-body'), '');
                    if ( response.code == 404 )	
                    {
                        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                        return;
                    }
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    // 
                    displayCRP();
                });
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse14
    collapse14.off('shown.bs.collapse');
    collapse14.on('shown.bs.collapse', e =>
    {
        displayCRP();
    });
    // display CRP
    function displayCRP()
    {
        // 
        SectionLoader(collapse14.find('.accordion-body'));
        PATIENT_MODEL.changedSettings({
            patientId: PatientObject.patientId,
            column: 'CRP'
        }).then(response =>
        {
            // hide loader
            SectionLoader(collapse14.find('.accordion-body'), '');
            // clear html
            tableElement11.find('.tbody').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            $.each(data, (k,v) =>
            {
                var doc_url = docURL(v);
                var patient_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">تحميل الملف</a>` : '';
                var preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">فتح الملف للمعاينة</a>` : '';
                if ( FUI_DISPLAY_LANG.lang == 'fr' )
                {
                    patient_doc_link = (doc_url) ? `<a href="${doc_url}" data-role="DOWNLOAD_FILE" download="${path.basename(doc_url)}">télécharger un fichier</a>` : '';
                    preview_doc_link = (doc_url != '') ? `<a href="${doc_url}" data-role="PREVIEW_DOC">Ouvrir le fichier pour l'aperçu</a>` : '';
                }
                html += `<div class="tr">
                            <div class="td">${v.CRP}</div>
                            <div class="td">${v.infoDate}|${v.infoTime}</div>
                            <div class="td pointer">
                                ${patient_doc_link}
                                <div>
                                    ${preview_doc_link}
                                </div>
                            </div>
                            <div class="td pointer">
                                <button class="btn btn-danger btn-sm" data-role="DELETE" data-id="${v.id}">
                                    <span class="no-pointer">
                                        <i class="fas fa-trash"></i>
                                    </span>
                                </button>
                            </div>
                        </div>PAG_SEP`;
            });
            // add html
            var options = {
                data: html.split('PAG_SEP')
            };
            new SmoothPagination(pagination11, tableElement11.find('.tbody'), options);
        });
    }
    // Medical_test
    var collapse15 = page_container.find('#collapse15');
    var medicalTestsImagesCarousel = collapse15.find('#medicalTestsImagesCarousel');
    // tableElement click
    medicalTestsImagesCarousel.off('click');
    medicalTestsImagesCarousel.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(async c =>
            {
                // display loader
                SectionLoader(collapse15.find('.accordion-body'));
                var response = await PATIENT_MODEL.medicalTest_delete(target.data('id'));
                // hide loader
                SectionLoader(collapse15.find('.accordion-body'), '');
                if ( response.code == 404 )	
                {
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    return;
                }
                ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                // 
                displayMedicalTests();
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse15
    collapse15.off('shown.bs.collapse');
    collapse15.on('shown.bs.collapse', e =>
    {
        displayMedicalTests();
    });
    // displayMedicalTests
    function displayMedicalTests()
    {
        // 
        SectionLoader(collapse15.find('.accordion-body'));
        PATIENT_MODEL.medicalTest_index(PatientObject.patientId).then(response =>
        {
            // hide loader
            SectionLoader(collapse15.find('.accordion-body'), '');
            medicalTestsImagesCarousel.find('.carousel-inner').html('');
            if ( response.code == 404 )
                return;

            var data = response.data;
            var html = '';
            for (let i = 0; i < data.length; i++) 
            {
                const v = data[i];
                html+= `<div class="carousel-item" data-bs-interval="2000">
                            <button class="btn-close position-relative" data-role="DELETE" data-id="${v.id}" style="z-index:30;"></button>
                            <div class="row gx-0 gy-0">`;
                for (let j = 0; j < v.album.length; j++) 
                {
                    const album = v.album[j];
                    var image = JSON.parse(album.image);
                    
                    html += `<div class="col">
                                <figure class="figure position-relative h-100">
                                    <div class="figure-overlay">
                                        <div class="btn-group btn-group-sm">
                                            <a href="${image.url}" class="btn btn-light rounded-0" download="${path.basename(image.fullpath)}" data-file=""><i class="fas fa-download"></i></a>
                                            <a href="${image.url}" class="btn btn-light rounded-0" data-role="PREVIEW_DOC"><i class="fas fa-eye no-pointer"></i></a>
                                        </div>
                                        <div class="figure-caption mt-3 text-white">${v.created_at_date} | ${v.created_at_time}</div>
                                    </div> 
                                    <div class="figure-content h-100">
                                        <img src="${image.url}" class="img-fluid img-thumbnail h-100" alt="...">
                                    </div>
                                </figure>
                            </div>`;
                }
                html+= `	</div>
                        </div>`;
            }
            medicalTestsImagesCarousel.find('.carousel-inner').html(html)
            .find('.carousel-item').first().addClass('active');
        });
    }
    // Albums
    var collapse16 = page_container.find('#collapse16');
    var albumsCarousel = collapse16.find('#albumsCarousel');
    // tableElement click
    albumsCarousel.off('click');
    albumsCarousel.on('click', e =>
    {
        var target = $(e.target);
        if ( target.data('role') == 'DELETE' )
        {
            PromptConfirmDialog().then(async c =>
            {
                // display loader
                SectionLoader(collapse16.find('.accordion-body'));
                var response = await PATIENT_MODEL.album_delete(target.data('id'));
                // hide loader
                SectionLoader(collapse16.find('.accordion-body'), '');
                if ( response.code == 404 )	
                {
                    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                    return;
                }
                ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text').text(response.message);
                // 
                displayAlbums();
            });
        }
        else if ( target.data('role') == 'PREVIEW_DOC' )
        {
            e.preventDefault();
            PreviewFileDialog({
                url: target.attr('href')
            });
        }
    });
    // collapse16
    collapse16.off('shown.bs.collapse');
    collapse16.on('shown.bs.collapse', e =>
    {
        displayAlbums();
    });
    // displayAlbums
    async function displayAlbums()
    {
        // 
        SectionLoader(collapse16.find('.accordion-body'));
        var response = await PATIENT_MODEL.album_index(PatientObject.patientId);
        // hide loader
        SectionLoader(collapse16.find('.accordion-body'), '');
        albumsCarousel.find('.carousel-inner').html('');
        if ( response.code == 404 )
            return;

        var data = response.data;
        var html = '';
        for (let i = 0; i < data.length; i++) 
        {
            const v = data[i];
            html+= `<div class="carousel-item" data-bs-interval="2000">
                        <button class="btn-close position-relative" data-role="DELETE" data-id="${v.id}" style="z-index:30;"></button>
                        <div class="row gx-0 gy-0">`;
            for (let j = 0; j < v.photos.length; j++) 
            {
                const photo = v.photos[j];
                var image = JSON.parse(photo.image);
                
                html += `<div class="col">
                            <figure class="figure position-relative h-100">
                                <div class="figure-overlay">
                                    <div class="btn-group btn-group-sm">
                                        <a href="${image.url}" class="btn btn-light rounded-0" download="${path.basename(image.fullpath)}" data-file=""><i class="fas fa-download"></i></a>
                                        <a href="${image.url}" class="btn btn-light rounded-0" data-role="PREVIEW_DOC"><i class="fas fa-eye no-pointer"></i></a>
                                    </div>
                                    <div class="figure-caption mt-3 text-white">${v.created_at_date} | ${v.created_at_time}</div>
                                </div> 
                                <div class="figure-content h-100">
                                    <img src="${image.url}" class="img-fluid img-thumbnail h-100" alt="...">
                                </div>
                            </figure>
                        </div>`;
            }
            html+= `	</div>
                    </div>`;
        }
        albumsCarousel.find('.carousel-inner').html(html)
        .find('.carousel-item').first().addClass('active');
    }
}
// parse doc_object
function docURL(data)
{
    if ( data.doc_object )
        return JSON.parse(data.doc_object).url;
    else
        return '';
}
// add changed settings
// save more info
var moreInfoForm = page_container.find('#moreInfoForm');
var bloodPressureInput = moreInfoForm.find('#bloodPressureInput');
var diabetesInput = moreInfoForm.find('#diabetesInput');
var insulinInput = moreInfoForm.find('#insulinInput');
var TSHInput = moreInfoForm.find('#TSHInput');
var HBA1cInput = moreInfoForm.find('#HBA1cInput');
var VSInput = moreInfoForm.find('#VSInput');
var CRPInput = moreInfoForm.find('#CRPInput');
var abdominalInput = moreInfoForm.find('#abdominalInput');
var infoDateInput = moreInfoForm.find('#infoDateInput');
var infoTimeInput = moreInfoForm.find('#infoTimeInput');
var fileInput = moreInfoForm.find('#fileInput');

var bloodPressureSelect = moreInfoForm.find('#bloodPressureSelect');
var diabetesSelect = moreInfoForm.find('#diabetesSelect');

var now = new Date();
// set current date/time in input
infoDateInput.val(CURRENT_DATE);
infoTimeInput.val(CURRENT_TIME);
// moreInfoForm submt
moreInfoForm.off('submit');
moreInfoForm.on('submit', e =>
{
    e.preventDefault();
    var target = moreInfoForm;
    PatientObject.blood_pressure = bloodPressureInput.val();
    PatientObject.diabetes = diabetesInput.val();
    PatientObject.insulin = insulinInput.val();
    PatientObject.TSH = TSHInput.val();
    PatientObject.HBA1c = HBA1cInput.val();
    PatientObject.VS = VSInput.val();
    PatientObject.CRP = CRPInput.val();
    PatientObject.infoDate = infoDateInput.val();
    PatientObject.infoTime = infoTimeInput.val();
    if ( fileInput[0].files.length > 0 )
        PatientObject.patient_doc = fileInput[0].files[0];
    // display loader
    SectionLoader(moreInfoForm);
    PATIENT_MODEL.storeChangedSetting(PatientObject).then(response =>
    {
        // hide loader
        SectionLoader(moreInfoForm, '');
        if ( response.code == 404 )
        {
            ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
            .text(response.message);
            return;
        }
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        // reset
        target.find('input[type="number"], input[type="text"]').val('');
    });
});
// change diabetes, blood pressure .... status
bloodPressureSelect.off('change');
bloodPressureSelect.on('change', e =>
{
    var val = bloodPressureSelect.find(':selected').val();

    if ( val == ST_NO )
        bloodPressureSelect.next().addClass('disabled').val('');
    else if ( val == ST_YES )
        bloodPressureSelect.next().removeClass('disabled').val('');
});
diabetesSelect.off('change');
diabetesSelect.on('change', e =>
{
    var val = diabetesSelect.find(':selected').val();

    if ( val == ST_NO )
        diabetesSelect.next().addClass('disabled').val('');
    else if ( val == ST_YES )
        diabetesSelect.next().removeClass('disabled').val('');
});
// save more info
var moreInfoForm2 = page_container.find('#moreInfoForm2');
var weightInput = moreInfoForm2.find('#weightInput');
var abdominalCircumferenceInput = moreInfoForm2.find('#abdominalCircumferenceInput');
var chestCircumferenceInput = moreInfoForm2.find('#chestCircumferenceInput');
var ArmsCircumferenceInput = moreInfoForm2.find('#ArmsCircumferenceInput');
var infoDateInput2 = moreInfoForm2.find('#infoDateInput2');
var infoTimeInput2 = moreInfoForm2.find('#infoDateInput2');
var fileInput2 = moreInfoForm2.find('#fileInput2');
// set current date/time in input
moreInfoForm2.find('input[type="date"]').val(CURRENT_DATE);
moreInfoForm2.find('input[type="time"]').val(CURRENT_TIME);
// moreInfoForm submt
moreInfoForm2.off('submit');
moreInfoForm2.on('submit', e =>
{
    e.preventDefault();
    var target = moreInfoForm2;
    PatientObject.weight = weightInput.val();
    PatientObject.abdominal_circumference = abdominalCircumferenceInput.val();
    PatientObject.chest_circumference = chestCircumferenceInput.val();
    PatientObject.arms_circumference = ArmsCircumferenceInput.val();
    PatientObject.infoDate = infoDateInput2.val();
    PatientObject.infoTime = infoTimeInput2.val();
    if ( fileInput2[0].files.length > 0 )
        PatientObject.patient_doc = fileInput2[0].files[0];
    // display loader
    SectionLoader(moreInfoForm2);
    PATIENT_MODEL.storeChangedSetting(PatientObject).then(response =>
    {
        // hide loader
        SectionLoader(moreInfoForm2, '');
        if ( response.code == 404 )
        {
            ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
            .text(response.message);
            return;
        }
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        // reset
        target.find('input[type="number"], input[type="text"]').val('');
    });
});
// medical tests
var moreInfoForm3 = page_container.find('#moreInfoForm3');
var infoDateInput3 = moreInfoForm3.find('#infoDateInput3');
var infoTimeInput3 = moreInfoForm3.find('#infoTimeInput3');
var fileInput3 = moreInfoForm3.find('#fileInput3');

infoDateInput3.val(CURRENT_DATE);
infoTimeInput3.val(CURRENT_TIME);
moreInfoForm3.off('submit');
moreInfoForm3.on('submit', async e =>
{
    e.preventDefault();
    var target = moreInfoForm3;
    if ( fileInput3[0].files.length == 0 )
        return;
    
    PatientObject.clinicId = USER_CONFIG.administration.clinicId;
    PatientObject.created_at_date = infoDateInput3.val();
    PatientObject.created_at_time = infoTimeInput3.val();
    var images = fileInput3[0].files;
    // display loader
    SectionLoader(target);
    var response = await PATIENT_MODEL.medicalTest_store(PatientObject, images);
    // hide loader
    SectionLoader(target, '');
    if ( response.code == 404 )
    {
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        return;
    }
    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
    .text(response.message);
    // reset
    target.find('input[type="number"], input[type="text"]').val('');
});
// patient photos
var moreInfoForm4 = page_container.find('#moreInfoForm4');
var infoDateInput4 = moreInfoForm4.find('#infoDateInput4');
var infoTimeInput4 = moreInfoForm4.find('#infoTimeInput4');
var fileInput4 = moreInfoForm4.find('#fileInput4');

infoDateInput4.val(CURRENT_DATE);
infoTimeInput4.val(CURRENT_TIME);
moreInfoForm4.off('submit');
moreInfoForm4.on('submit', async e =>
{
    e.preventDefault();
    var target = moreInfoForm4;
    if ( fileInput4[0].files.length == 0 )
        return;
    
    PatientObject.clinicId = USER_CONFIG.administration.clinicId;
    PatientObject.created_at_date = infoDateInput4.val();
    PatientObject.created_at_time = infoTimeInput4.val();
    var images = fileInput4[0].files;
    // display loader
    SectionLoader(target);
    var response = await PATIENT_MODEL.album_store(PatientObject, images);
    // hide loader
    SectionLoader(target, '');
    if ( response.code == 404 )
    {
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        return;
    }
    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
    .text(response.message);
    // reset
    target.find('input[type="number"], input[type="text"]').val('');
});

// add / sub dept
var updateDeptForm = page_container.find('#updateDeptForm');
var deptAmountInput = updateDeptForm.find('#deptAmountInput');
var subDeptBTN = updateDeptForm.find('#subDeptBTN');
var addDeptBTN = updateDeptForm.find('#addDeptBTN');
var current_dept = updateDeptForm.find('#current_dept')

// show current dept
setTimeout(() => {
    current_dept.text(PatientObject.dept)
}, 5*1000);

updateDeptForm.off('submit');
updateDeptForm.on('submit', e =>
{
    e.preventDefault();
});
subDeptBTN.off('click');
subDeptBTN.on('click', async e =>
{
    SectionLoader(updateDeptForm);
    var response = await PATIENT_MODEL.dept_set({
        patientId: PatientObject.patientId,
        amount: deptAmountInput.val(),
        operation: 'sub'
    });
    SectionLoader(updateDeptForm, '');
    if ( response.code == 404 )
    {
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        return;
    }
    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
    .text(response.message);
    // reset
    updateDeptForm[0].reset();
});
addDeptBTN.off('click');
addDeptBTN.on('click', async e =>
{
    SectionLoader(updateDeptForm);
    var response = await PATIENT_MODEL.dept_set({
        patientId: PatientObject.patientId,
        amount: deptAmountInput.val(),
        operation: 'add'
    });
    SectionLoader(updateDeptForm, '');
    if ( response.code == 404 )
    {
        ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
        .text(response.message);
        return;
    }
    ERROR_BOX.show(0).delay(7*1000).hide(0).find('#text')
    .text(response.message);
    // reset
    updateDeptForm[0].reset();
});
function displayCurrentDept()
{
    current_dept.html(PatientObject.dept)
}


})

</script>
